(this["webpackJsonp@dhis2/app-shell"]=this["webpackJsonp@dhis2/app-shell"]||[]).push([[127],{211:function(e,a,t){e.exports={container:"LayoutContainer_container__2gt-1"}},212:function(e,a,t){e.exports={sidebar:"LayoutSidebar_sidebar__38x-X"}},213:function(e,a,t){e.exports={content:"LayoutContent_content__3pEdj"}},214:function(e,a,t){e.exports={title:"AppTitle_title__mjsfQ"}},310:function(e,a,t){},311:function(e,a,t){},312:function(e,a,t){"use strict";t.r(a);var r,l,n,s,c,i,o=t(7),u=t(1),v=t.n(u),b=t(6),E=t.n(b),d=[{value:"FAVORITE_VIEWS",label:E.a.t("Favorite views"),subtitle:E.a.t("Number of times users looked at analysis favorites")},{value:"FAVORITES_SAVED",label:E.a.t("Favorites saved"),subtitle:E.a.t("Number of analysis favorites created by users")},{value:"USERS",label:E.a.t("Users"),subtitle:E.a.t("Number of users in the system")},{value:"TOP_FAVORITES",label:E.a.t("Top favorites")},{value:"DATA_VALUES",label:E.a.t("Data values"),subtitle:E.a.t("Number of data values saved in the system")}],m=[{value:"DAY",label:E.a.t("Day")},{value:"WEEK",label:E.a.t("Week")},{value:"MONTH",label:E.a.t("Month")},{value:"YEAR",label:E.a.t("Year")}],g=[{value:"SUM",label:E.a.t("Sum")},{value:"AVERAGE",label:E.a.t("Average")}],y=[{value:"ALL",label:E.a.t("All")},{value:"TOTAL",label:E.a.t("Total")}],p=[{value:"CHART_VIEW",label:E.a.t("Chart")},{value:"MAP_VIEW",label:E.a.t("Map")},{value:"REPORT_TABLE_VIEW",label:E.a.t("Report table")},{value:"EVENT_REPORT_VIEW",label:E.a.t("Event report")},{value:"EVENT_CHART_VIEW",label:E.a.t("Event chart")},{value:"DASHBOARD_VIEW",label:E.a.t("Dashboard")},{value:"DATA_SET_REPORT_VIEW",label:E.a.t("Data set report")}],f=[{value:"5",label:"5"},{value:"10",label:"10"},{value:"15",label:"15"},{value:"20",label:"20"},{value:"25",label:"25"}],S=[{value:"ASC",label:E.a.t("Ascending")},{value:"DESC",label:E.a.t("Descending")}],O=t(14),T=function(e){var a=e.startDate,t=e.setStartDate,r=e.endDate,l=e.setEndDate;return v.a.createElement("div",{className:"uaa-date-range"},v.a.createElement(O.g,{label:E.a.t("Start Date"),type:"date",value:a,onChange:function(e){var a=e.value;return t(a)}}),v.a.createElement(O.g,{label:E.a.t("End Date"),type:"date",value:r,onChange:function(e){var a=e.value;return l(a)}}))},h=function(e){var a=e.interval,t=e.setInterval;return v.a.createElement(O.m,{selected:a,onChange:function(e){var a=e.selected;t(a)},label:E.a.t("Interval")},m.map((function(e){var a=e.label,t=e.value;return v.a.createElement(O.n,{label:a,key:t,value:t})})))},A=function(e){var a=e.aggregation,t=e.setAggregation;return v.a.createElement(O.m,{selected:a,onChange:function(e){var a=e.selected;t(a)},label:E.a.t("Aggregation level")},g.map((function(e){var a=e.label,t=e.value;return v.a.createElement(O.n,{label:a,key:t,value:t})})))},D=function(e){var a=e.chartType,t=e.setChartType;return v.a.createElement(O.m,{selected:a,onChange:function(e){var a=e.selected;t(a)},label:E.a.t("Chart type")},y.map((function(e){var a=e.label,t=e.value;return v.a.createElement(O.n,{label:a,key:t,value:t})})))},V=function(e){var a=e.eventType,t=e.setEventType;return v.a.createElement(O.m,{selected:a,onChange:function(e){var a=e.selected;t(a)},label:E.a.t("Event type")},p.map((function(e){var a=e.label,t=e.value;return v.a.createElement(O.n,{label:a,key:t,value:t})})))},k=function(e){var a=e.pageSize,t=e.setPageSize;return v.a.createElement(O.m,{selected:a,onChange:function(e){var a=e.selected;t(a)},label:E.a.t("Page size")},f.map((function(e){var a=e.label,t=e.value;return v.a.createElement(O.n,{label:a,key:t,value:t})})))},C=function(e){var a=e.sortOrder,t=e.setSortOrder;return v.a.createElement(O.m,{selected:a,onChange:function(e){var a=e.selected;t(a)},label:E.a.t("Sort order")},S.map((function(e){var a=e.label,t=e.value;return v.a.createElement(O.n,{label:a,key:t,value:t})})))},j=function(e){var a=e.category,t=e.startDate,r=e.setStartDate,l=e.endDate,n=e.setEndDate,s=e.interval,c=e.setInterval,i=e.aggregation,o=e.setAggregation,u=e.chartType,b=e.setChartType,E=e.eventType,d=e.setEventType,m=e.pageSize,g=e.setPageSize,y=e.sortOrder,p=e.setSortOrder,f="TOP_FAVORITES"===a,S="FAVORITE_VIEWS"===a;return v.a.createElement(v.a.Fragment,null,!f&&v.a.createElement(v.a.Fragment,null,v.a.createElement(T,{startDate:t,setStartDate:r,endDate:l,setEndDate:n}),v.a.createElement(h,{interval:s,setInterval:c})),S&&v.a.createElement(v.a.Fragment,null,v.a.createElement(A,{aggregation:i,setAggregation:o}),v.a.createElement(D,{chartType:u,setChartType:b})),f&&v.a.createElement(v.a.Fragment,null,v.a.createElement(V,{eventType:E,setEventType:d}),v.a.createElement(k,{pageSize:m,setPageSize:g}),v.a.createElement(C,{sortOrder:y,setSortOrder:p})))},R=t(211),_=t.n(R),I=function(e){var a=e.children;return v.a.createElement("main",{className:_.a.container},a)},Y=t(212),w=t.n(Y),M=function(e){var a=e.children;return v.a.createElement("aside",{className:w.a.sidebar},a)},F=t(213),z=t.n(F),L=function(e){var a=e.children;return v.a.createElement("section",{className:z.a.content},a)},N=function(e){var a=e.category,t=e.setCategory;return v.a.createElement(O.m,{selected:a,onChange:function(e){var a=e.selected;t(a)},label:E.a.t("Category")},d.map((function(e){var a=e.label,t=e.value;return v.a.createElement(O.n,{label:a,key:t,value:t})})))},P=t(214),W=t.n(P),U=function(){return v.a.createElement("h1",{className:W.a.title},E.a.t("Usage Analytics"))},x=t(21),H=t.n(x),G=function(e,a){var t=e.year,r=e.month,l=e.week,n=e.day;switch(a){case"YEAR":return H()({year:t}).format("YYYY");case"MONTH":var s=r-1;return H()({year:t,month:s}).format("MMM YYYY");case"WEEK":var c="[".concat(E.a.t("Week"),"] [").concat(l,"] / YYYY");return H()({year:t}).format(c);case"DAY":var i=r-1;return H()({year:t,month:i,day:n}).format("MMM D, YYYY")}},J=function(e){var a=e.data,t=e.interval;return v.a.createElement(O.o,null,v.a.createElement(O.s,null,v.a.createElement(O.u,null,v.a.createElement(O.r,null,E.a.t("Date")),v.a.createElement(O.r,null,E.a.t("Data Values")))),v.a.createElement(O.p,null,a.map((function(e){var a=e.year,r=e.month,l=e.week,n=e.day,s=e.savedDataValues,c=G({year:a,month:r,week:l,day:n},t);return v.a.createElement(O.t,{key:c},v.a.createElement(O.q,null,c),v.a.createElement(O.q,null,s))}))))},K=t(215),q=t(15),B={key:"date",label:E.a.t("Date")},Q={key:"mapViews",label:E.a.t("Map")},X={key:"chartViews",label:E.a.t("Chart")},Z={key:"pivotTableViews",label:E.a.t("Pivot Table")},$={key:"eventReportViews",label:E.a.t("Event Report")},ee={key:"eventChartViews",label:E.a.t("Event Chart")},ae={key:"dashboardViews",label:E.a.t("Dashboard")},te={key:"dataSetReportViews",label:E.a.t("Data Set Report")},re={key:"totalViews",label:E.a.t("Total")},le={key:"averageMapViews",label:E.a.t("Average Map")},ne={key:"averageChartViews",label:E.a.t("Average Chart")},se={key:"averagePivotTableViews",label:E.a.t("Average Pivot Table")},ce={key:"averageEventReportViews",label:E.a.t("Average Event Report")},ie={key:"averageEventChartViews",label:E.a.t("Average Event Chart")},oe={key:"averageDashboardViews",label:E.a.t("Average Dashboard")},ue={key:"averageViews",label:E.a.t("Average")},ve={key:"savedMaps",label:E.a.t("Maps")},be={key:"savedCharts",label:E.a.t("Charts")},Ee={key:"savedPivotTables",label:E.a.t("Pivot Tables")},de={key:"savedEventReports",label:E.a.t("Event Reports")},me={key:"savedEventCharts",label:E.a.t("Event Charts")},ge={key:"savedDashboards",label:E.a.t("Dashboards")},ye={key:"savedIndicators",label:E.a.t("Indicators")},pe={key:"activeUsers",label:E.a.t("Active Users")},fe={key:"users",label:E.a.t("Total Users")},Se={key:"position",label:E.a.t("Position")},Oe={key:"name",label:E.a.t("Name")},Te={key:"views",label:E.a.t("Views")},he={key:"id",label:E.a.t("ID")},Ae={key:"created",label:E.a.t("Created")},De={key:"savedDataValues",label:E.a.t("Data Values")},Ve=[Q,X,Z,$,ee,ae,te],ke=[le,ne,se,ce,ie,oe],Ce=[ve,be,Ee,de,me,ge,ye],je=[pe,fe],Re=(l={},Object(q.a)(l,"FAVORITE_VIEWS",(r={},Object(q.a)(r,"SUM",[B].concat(Ve,[re])),Object(q.a)(r,"AVERAGE",[B].concat(ke,[ue])),r)),Object(q.a)(l,"FAVORITES_SAVED",[B].concat(Ce)),Object(q.a)(l,"USERS",[B].concat(je)),Object(q.a)(l,"TOP_FAVORITES",[Se,Oe,Te,he,Ae]),Object(q.a)(l,"DATA_VALUES",[B,De]),i={},Object(q.a)(i,"FAVORITE_VIEWS",(c={},Object(q.a)(c,"SUM",(n={},Object(q.a)(n,"ALL",Ve),Object(q.a)(n,"TOTAL",[re]),n)),Object(q.a)(c,"AVERAGE",(s={},Object(q.a)(s,"ALL",ke),Object(q.a)(s,"TOTAL",[ue]),s)),c)),Object(q.a)(i,"FAVORITES_SAVED",Ce),Object(q.a)(i,"USERS",je),Object(q.a)(i,"DATA_VALUES",[De]),i),_e=["#7cb5ec","#CC6600","#CCCC00","#66CC00","#ff0066","#000000","#00CCCC"],Ie={animation:{duration:180},legend:{position:"bottom"},responsive:!0,maintainAspectRatio:!1,tooltips:{mode:"nearest"},scales:{xAxes:[{display:!0,scaleLabel:{display:!0},ticks:{maxRotation:45,minRotation:45}}],yAxes:[{display:!0,scaleLabel:{display:!0,labelString:E.a.t("Values")},ticks:{suggestedMin:0,precision:0}}]}},Ye={backgroundColor:"rgba(0, 0, 0, 0)",fill:!1,lineTension:0};function we(e){e.resize()}var Me=t(216),Fe=(t(310),function(e){var a=e.data,t=function(e){for(var a=e.aggregation,t=e.category,r=e.chartType,l=e.interval,n=e.data,s=[],c=[],i=d.find((function(e){return e.value===t})),o=1,u=null,v="FAVORITE_VIEWS"===t?Re[t][a][r]:Re[t],b=n.length,E=v.length,m=0;m<b;m++){var g=n[m];s.push(G(g,l));for(var y=0;y<E;y++){var p=v[y];0===m&&c.push(Object(K.a)({},Ye,{label:p.label,data:[],borderColor:_e[y]}));var f=g[p.key];f>o&&(o=f),(null===u||f<u)&&(u=f),c[y].data.push(f)}}return Ie.scales.yAxes[0].ticks.suggestedMax=o,Ie.scales.yAxes[0].ticks.suggestedMin=u,Ie.onResize=we,{data:{labels:s,datasets:c},options:Ie,title:i.label,subtitle:i.subtitle}}({aggregation:e.aggregation,category:e.category,chartType:e.chartType,interval:e.interval,data:a}),r=t.options,l=t.data,n=t.title,s=t.subtitle,c=v.a.createElement(u.Fragment,null,v.a.createElement("h4",{className:"uaa-chart-title"},n),v.a.createElement("h6",{className:"uaa-chart-subtitle"},s),v.a.createElement("div",{className:"uaa-chart-wrap"},v.a.createElement(Me.a,{data:l,options:r})));return v.a.createElement("div",{className:"uua-data-container uua-chart-container"},c)}),ze=t(16),Le={favorites:{resource:"dataStatistics/favorites",params:function(e){return{eventType:e.eventType,pageSize:e.pageSize,sortOrder:e.sortOrder}}}},Ne=function(e){var a=e.eventType,t=e.pageSize,r=e.sortOrder,l=e.children,n=Object(ze.c)(Le,{lazy:!0,variables:{eventType:a,pageSize:t,sortOrder:r}}),s=n.loading,c=n.error,i=n.data,o=n.called,b=n.refetch;if(Object(u.useEffect)((function(){b({eventType:a,pageSize:t,sortOrder:r})}),[a,t,r]),!o||s)return v.a.createElement(O.d,null,v.a.createElement(O.b,null,v.a.createElement(O.c,null)));if(c)throw c;return l(i.favorites)},Pe={dataStatistics:{resource:"dataStatistics",params:function(e){return{startDate:e.startDate,endDate:e.endDate,interval:e.interval}}}},We=function(e){var a=e.startDate,t=e.endDate,r=e.interval,l=e.stale,n=e.setStale,s=e.children,c=function(){return n(!1)},i=Object(ze.c)(Pe,{lazy:!0,variables:{startDate:a,endDate:t,interval:r},onComplete:c,onError:c}),o=i.loading,b=i.error,E=i.data,d=i.called,m=i.refetch;if(Object(u.useEffect)((function(){m({startDate:a,endDate:t,interval:r})}),[a,t,r]),!d||o||l)return v.a.createElement(O.d,null,v.a.createElement(O.b,null,v.a.createElement(O.c,null)));if(b)throw b;return s(E.dataStatistics)},Ue=function(e){var a=e.aggregation,t=e.category,r=e.chartType,l=e.endDate,n=e.eventType,s=e.interval,c=e.isTopFavorites,i=e.pageSize,o=e.setStale,b=e.sortOrder,E=e.stale,d=e.startDate;return c?v.a.createElement(Ne,{eventType:n,pageSize:i,sortOrder:b},(function(e){return v.a.createElement("pre",null,JSON.stringify(e,null,2))})):v.a.createElement(We,{startDate:d,endDate:l,interval:s,setStale:o,stale:E},(function(e){return"DATA_VALUES"===t?v.a.createElement(u.Fragment,null,v.a.createElement(Fe,{data:e,interval:s,aggregation:a,category:t,chartType:r}),v.a.createElement(J,{data:e,interval:s})):null}))},xe=(t(311),function(){return{initialStartDate:H()().subtract(4,"months").format("YYYY-MM-DD"),initialEndDate:H()().format("YYYY-MM-DD")}}),He=function(){var e=xe(),a=e.initialStartDate,t=e.initialEndDate,r=Object(u.useState)("FAVORITE_VIEWS"),l=Object(o.a)(r,2),n=l[0],s=l[1],c=Object(u.useState)(a),i=Object(o.a)(c,2),b=i[0],E=i[1],d=Object(u.useState)(t),m=Object(o.a)(d,2),g=m[0],y=m[1],p=Object(u.useState)("WEEK"),f=Object(o.a)(p,2),S=f[0],O=f[1],T=Object(u.useState)("SUM"),h=Object(o.a)(T,2),A=h[0],D=h[1],V=Object(u.useState)("ALL"),k=Object(o.a)(V,2),C=k[0],R=k[1],_=Object(u.useState)("CHART_VIEW"),Y=Object(o.a)(_,2),w=Y[0],F=Y[1],z=Object(u.useState)("25"),P=Object(o.a)(z,2),W=P[0],x=P[1],H=Object(u.useState)("ASC"),G=Object(o.a)(H,2),J=G[0],K=G[1],q=Object(u.useState)(!1),B=Object(o.a)(q,2),Q=B[0],X=B[1],Z="TOP_FAVORITES"===n;return v.a.createElement(I,null,v.a.createElement(M,null,v.a.createElement(U,null),v.a.createElement(N,{category:n,setCategory:s}),v.a.createElement(j,{aggregation:A,category:n,chartType:C,endDate:g,eventType:w,interval:S,pageSize:W,setAggregation:D,setChartType:R,setEndDate:y,setEventType:F,setInterval:function(e){X(!0),O(e)},setPageSize:x,setSortOrder:K,setStartDate:E,sortOrder:J,startDate:b})),v.a.createElement(L,null,v.a.createElement(Ue,{aggregation:A,category:n,chartType:C,endDate:g,eventType:w,interval:S,isTopFavorites:Z,pageSize:W,setStale:X,sortOrder:J,stale:Q,startDate:b})))};t.d(a,"default",(function(){return He}))}}]);
//# sourceMappingURL=app.51bc7c90.chunk.js.map