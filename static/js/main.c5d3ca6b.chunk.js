(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{163:function(e){e.exports={"Usage Analytics":"",Values:"","Please use the format yyyy-mm-dd":"","End date is before start date":"","Start date is before end date":"",Category:"","Start date":"","End date":"",Interval:"","Aggregation Level":"","Chart Type":"","Event Type":"","Page Size":"","Sort Order":"","There was an error retrieving the usage analytics data":"",Sum:"",Average:"","Favorite views":"","Number of times users looked at analysis favorites":"","Favorites saved":"","Number of analysis favorites created by users":"",Users:"","Number of users in the system":"","Top favorites":"","Data values":"","Number of data values saved in the system":"",All:"",Total:"",Chart:"",Map:"","Report table":"","Event report":"","Event chart":"",Dashboard:"","Data set report":"",Day:"",Week:"",Month:"",Year:"",Date:"","Pivot Table":"","Event Report":"","Event Chart":"","Data Set Report":"","Average Map":"","Average Chart":"","Average Pivot Table":"","Average Event Report":"","Average Event Chart":"","Average Dashboard":"",Maps:"",Charts:"","Pivot Tables":"","Event Reports":"","Event Charts":"",Dashboards:"",Indicators:"","Active Users":"","Total Users":"",Position:"",Name:"",Views:"",ID:"",Created:"","Data Values":"",Ascending:"",Descending:""}},191:function(e,a,t){e.exports=t(412)},196:function(e,a,t){},209:function(e,a,t){},210:function(e,a,t){},247:function(e,a,t){},386:function(e,a,t){},388:function(e,a,t){},412:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(160),s=t.n(l),o=(t(196),t(2)),c=t.n(o),i=t(9),u=t(184),v=t(43),b=t(162),d=(t(201),"LOADING"),m="READY",p="ERROR",g="APP_LOAD_SUCCESS",h="APP_LOAD_ERROR",E="USAGE_DATA_REQUESTED",f="USAGE_DATA_RECEIVED",y="USAGE_DATA_ERRORED",A="FILTER_UPDATED";var O,D=t(6),T=t(41),k="DAY",S="WEEK",j="MONTH",C="YEAR",w=[{value:k,label:c.a.t("Day")},{value:S,label:c.a.t("Week")},{value:j,label:c.a.t("Month")},{value:C,label:c.a.t("Year")}],R={yyyymmdd:{day:"numeric",month:"short",year:"numeric"},yyyymm:{month:"short",year:"numeric"}},V=c.a.t("Week");function _(e,a){a&&e.setMonth(e.getMonth()+a);var t=e.getFullYear(),n=""+(e.getMonth()+1),r=""+e.getDate();return n.length<2&&(n="0"+n),r.length<2&&(r="0"+r),[t,n,r].join("-")}function L(e,a){var t=e.year,n=e.month,r=e.week,l=e.day;switch(a){case C:return t;case j:return U("".concat(t,"-").concat(n),R.yyyymm);case S:return"".concat(V," ").concat(r," / ").concat(t);case k:default:return U("".concat(t,"-").concat(n,"-").concat(l))}}function U(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R.yyyymmdd,t=J.getState().locale||"en",n=new Date(e);return new Intl.DateTimeFormat(t,a).format(n)}var I="FAVORITE_VIEWS",F="TOP_FAVORITES",N=(O={},Object(D.a)(O,I,{value:I,label:c.a.t("Favorite views"),subtitle:c.a.t("Number of times users looked at analysis favorites")}),Object(D.a)(O,"FAVORITES_SAVED",{value:"FAVORITES_SAVED",label:c.a.t("Favorites saved"),subtitle:c.a.t("Number of analysis favorites created by users")}),Object(D.a)(O,"USERS",{value:"USERS",label:c.a.t("Users"),subtitle:c.a.t("Number of users in the system")}),Object(D.a)(O,F,{value:F,label:c.a.t("Top favorites")}),Object(D.a)(O,"DATA_VALUES",{value:"DATA_VALUES",label:c.a.t("Data values"),subtitle:c.a.t("Number of data values saved in the system")}),O),P=[N.FAVORITE_VIEWS,N.FAVORITES_SAVED,N.USERS,N.TOP_FAVORITES,N.DATA_VALUES],M=[{value:"SUM",label:c.a.t("Sum")},{value:"AVERAGE",label:c.a.t("Average")}],W=[{value:"ALL",label:c.a.t("All")},{value:"TOTAL",label:c.a.t("Total")}],x=[{value:"CHART_VIEW",label:c.a.t("Chart")},{value:"MAP_VIEW",label:c.a.t("Map")},{value:"REPORT_TABLE_VIEW",label:c.a.t("Report table")},{value:"EVENT_REPORT_VIEW",label:c.a.t("Event report")},{value:"EVENT_CHART_VIEW",label:c.a.t("Event chart")},{value:"DASHBOARD_VIEW",label:c.a.t("Dashboard")},{value:"DATA_SET_REPORT_VIEW",label:c.a.t("Data set report")}],z=[{value:"ASC",label:c.a.t("Ascending")},{value:"DESC",label:c.a.t("Descending")}],G=function(){return new Date("2016-10-30")},H={category:I,startDate:_(G(),-5),endDate:_(G()),interval:S,aggregationLevel:"SUM",chartType:"TOTAL",eventType:"CHART_VIEW",pageSize:25,sortOrder:"ASC"};var Y=[b.a];var B=Object(v.c)({appStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;switch((arguments.length>1?arguments[1]:void 0).type){case g:return m;case h:return p;default:return e}},locale:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case g:return n.locale;default:return e}},usageData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case E:return d;case g:return n.usageData;case f:return n;case y:return p;default:return e}},filter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case A:return Object(T.a)({},e,Object(D.a)({},n.key,n.value));default:return e}}}),J=Object(v.d)(B,v.a.apply(void 0,Y)),K=t(77),Q=t(78),$=t(84),q=t(79),X=t(85),Z=t(42),ee=t(58),ae=t.n(ee),te=t(115),ne=t(185),re=t(186),le=t(187),se=t(111),oe=t.n(se),ce=t(163);oe.a.locale("en"),c.a.addResources("en","usage-analytics-app",ce),c.a.setDefaultNamespace("usage-analytics-app"),c.a.changeLanguage("en");var ie=c.a;function ue(e){var a=e.filter;return Promise.all([be("userSettings").then(function(e){return e.keyUiLocale}),ve(a)]).then(function(e){var a=Object(ne.a)(e,2),t=a[0],n=a[1];return function(e){ie.changeLanguage(e),Object(le.a)(e)}(t),{usageData:n,locale:t}})}function ve(e){return e.category===F?function(e){var a=e.eventType,t=e.pageSize,n=e.sortOrder,r="eventType=".concat(a,"&pageSize=").concat(t,"&sortOrder=").concat(n,"&_=").concat(Date.now());return be("dataStatistics/favorites?".concat(r))}(e):function(e){var a=e.startDate,t=e.endDate,n=e.interval,r="startDate=".concat(a,"&endDate=").concat(t,"&interval=").concat(n,"&_=").concat(Date.now());return be("dataStatistics?".concat(r))}(e)}function be(e){return Object(re.a)(e).then(function(e){return e.json()}).then(function(e){if("ERROR"===e.status)throw new Error(e.message);return e})}var de=function(e,a){return function(t,n){t(me(e,a)),pe(n().filter,t)}},me=function(e,a){return he(A,{key:e,value:a})};function pe(e,a){return ge.apply(this,arguments)}function ge(){return(ge=Object(te.a)(ae.a.mark(function e(a,t){var n;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(he(E)),e.prev=1,e.next=4,ve(a);case 4:n=e.sent,t(he(f,n)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0),t(he(y));case 12:case"end":return e.stop()}},e,this,[[1,8]])}))).apply(this,arguments)}function he(e,a){return{type:e,payload:a}}t(209);var Ee=function(e){var a=e.message;return r.a.createElement("div",{className:"uaa-error"},a)},fe=t(35),ye=t(188);var Ae=function(e){var a=e.component,t=Object(ye.a)(e,["component"]);return r.a.createElement("div",{className:"uaa-fieldwrap"},r.a.createElement(a,t))},Oe=t(57),De=(t(210),function(e){function a(e){var t;return Object(K.a)(this,a),(t=Object($.a)(this,Object(q.a)(a).call(this,e))).state={value:e.initialValue,error:null},t.onChange=t.onChange.bind(Object(Oe.a)(Object(Oe.a)(t))),t}return Object(X.a)(a,e),Object(Q.a)(a,[{key:"componentDidUpdate",value:function(e){if(console.log(e,this.props.name),e.startDate!==this.props.startDate||e.endDate!==this.props.endDate){var a=this.getError(this.state.value);!a&&this.state.error&&this.setState({error:a})}}},{key:"onChange",value:function(e){var a=e.target.value,t=this.getError(a);this.setState({value:a,error:t}),t||this.props.onChange(this.props.name,a)}},{key:"getError",value:function(e){var a=this.props,t=a.startDate,n=a.endDate;return/[0-9]{4}-[0-9]{2}-[0-9]{2}/.test(e)?t&&e<t?c.a.t("End date is before start date"):n&&e>n?c.a.t("Start date is before end date"):null:c.a.t("Please use the format yyyy-mm-dd")}},{key:"render",value:function(){var e=this.props.label,a=this.state,t=a.error,n=a.value;return r.a.createElement("div",{className:"uaa-date-field"},r.a.createElement("label",null,e),r.a.createElement("input",{type:"date",value:n,onChange:this.onChange}),t&&r.a.createElement("span",{className:"uaa-date-input-error"},t))}}]),a}(n.Component)),Te=[{value:5,label:"5"},{value:10,label:"10"},{value:15,label:"15"},{value:20,label:"20"},{value:25,label:"25"}],ke=Object(i.b)(Ue("category"),{onChange:function(e,a){return function(t,n){var r=n().filter,l=r.category;t(me(e,a)),l!==a&&(a===F&&l!==F||l===F&&a!==F)&&pe(Object(T.a)({},r,{category:a}),t)}}})(function(e){return r.a.createElement(Ae,Object.assign({component:fe.a},e,{name:"category",list:P,label:c.a.t("Category"),kind:"filled"}))}),Se=Object(i.b)(function(e){return{initialValue:e.filter.startDate,endDate:e.filter.endDate}},{onChange:de})(function(e){return r.a.createElement(De,Object.assign({},e,{name:"startDate",label:c.a.t("Start date")}))}),je=Object(i.b)(function(e){return{initialValue:e.filter.endDate,startDate:e.filter.startDate}},{onChange:de})(function(e){return r.a.createElement(De,Object.assign({},e,{name:"endDate",label:c.a.t("End date")}))}),Ce=Object(i.b)(Ue("interval"),{onChange:de})(function(e){return r.a.createElement(Ae,Object.assign({component:fe.a},e,{name:"interval",list:w,label:c.a.t("Interval"),kind:"filled"}))}),we=Object(i.b)(Ue("aggregationLevel"),{onChange:me})(function(e){return r.a.createElement(Ae,Object.assign({component:fe.a},e,{name:"aggregationLevel",list:M,label:c.a.t("Aggregation Level"),kind:"filled"}))}),Re=Object(i.b)(Ue("chartType"),{onChange:me})(function(e){return r.a.createElement(Ae,Object.assign({component:fe.a},e,{name:"chartType",list:W,label:c.a.t("Chart Type"),kind:"filled"}))}),Ve=Object(i.b)(Ue("eventType"),{onChange:de})(function(e){return r.a.createElement(Ae,Object.assign({component:fe.a},e,{name:"eventType",list:x,label:c.a.t("Event Type"),kind:"filled"}))}),_e=Object(i.b)(Ue("pageSize"),{onChange:de})(function(e){return r.a.createElement(Ae,Object.assign({component:fe.a},e,{name:"pageSize",list:Te,label:c.a.t("Page Size"),kind:"filled"}))}),Le=Object(i.b)(Ue("sortOrder"),{onChange:de})(function(e){return r.a.createElement(Ae,Object.assign({component:fe.a},e,{name:"sortOrder",list:z,label:c.a.t("Sort Order"),kind:"filled"}))});function Ue(e){return function(a){return{value:a.filter[e]}}}t(247);var Ie,Fe,Ne,Pe,Me,We,xe=Object(i.b)(function(e){var a=e.filter.category;return{showDateFields:a!==F,showTopFavoritesFields:a===F,showFavoriteViewsFields:a===I}})(function(e){var a=e.showDateFields,t=e.showFavoriteViewsFields,l=e.showTopFavoritesFields;return r.a.createElement("aside",{className:"uaa-filter-sidebar"},r.a.createElement("h1",{className:"uaa-app-header"},c.a.t("Usage Analytics")),r.a.createElement(ke,null),a&&r.a.createElement(n.Fragment,null,r.a.createElement(Se,null),r.a.createElement(je,null),r.a.createElement(Ce,null)),t&&r.a.createElement(n.Fragment,null,r.a.createElement(we,null),r.a.createElement(Re,null)),l&&r.a.createElement(n.Fragment,null,r.a.createElement(Ve,null),r.a.createElement(_e,null),r.a.createElement(Le,null)))}),ze=t(175),Ge={key:"date",label:c.a.t("Date")},He={key:"mapViews",label:c.a.t("Map")},Ye={key:"chartViews",label:c.a.t("Chart")},Be={key:"pivotTableViews",label:c.a.t("Pivot Table")},Je={key:"eventReportViews",label:c.a.t("Event Report")},Ke={key:"eventChartViews",label:c.a.t("Event Chart")},Qe={key:"dashboardViews",label:c.a.t("Dashboard")},$e={key:"dataSetReportViews",label:c.a.t("Data Set Report")},qe={key:"totalViews",label:c.a.t("Total")},Xe={key:"averageMapViews",label:c.a.t("Average Map")},Ze={key:"averageChartViews",label:c.a.t("Average Chart")},ea={key:"averagePivotTableViews",label:c.a.t("Average Pivot Table")},aa={key:"averageEventReportViews",label:c.a.t("Average Event Report")},ta={key:"averageEventChartViews",label:c.a.t("Average Event Chart")},na={key:"averageDashboardViews",label:c.a.t("Average Dashboard")},ra={key:"averageViews",label:c.a.t("Average")},la={key:"savedMaps",label:c.a.t("Maps")},sa={key:"savedCharts",label:c.a.t("Charts")},oa={key:"savedPivotTables",label:c.a.t("Pivot Tables")},ca={key:"savedEventReports",label:c.a.t("Event Reports")},ia={key:"savedEventCharts",label:c.a.t("Event Charts")},ua={key:"savedDashboards",label:c.a.t("Dashboards")},va={key:"savedIndicators",label:c.a.t("Indicators")},ba={key:"activeUsers",label:c.a.t("Active Users")},da={key:"users",label:c.a.t("Total Users")},ma={key:"position",label:c.a.t("Position")},pa={key:"name",label:c.a.t("Name")},ga={key:"views",label:c.a.t("Views")},ha={key:"id",label:c.a.t("ID")},Ea={key:"created",label:c.a.t("Created")},fa={key:"savedDataValues",label:c.a.t("Data Values")},ya=[He,Ye,Be,Je,Ke,Qe,$e],Aa=[Xe,Ze,ea,aa,ta,na],Oa=[la,sa,oa,ca,ia,ua,va],Da=[ba,da],Ta=(Fe={},Object(D.a)(Fe,I,(Ie={},Object(D.a)(Ie,"SUM",[Ge].concat(ya,[qe])),Object(D.a)(Ie,"AVERAGE",[Ge].concat(Aa,[ra])),Ie)),Object(D.a)(Fe,"FAVORITES_SAVED",[Ge].concat(Oa)),Object(D.a)(Fe,"USERS",[Ge].concat(Da)),Object(D.a)(Fe,F,[ma,pa,ga,ha,Ea]),Object(D.a)(Fe,"DATA_VALUES",[Ge,fa]),Fe),ka=(We={},Object(D.a)(We,I,(Me={},Object(D.a)(Me,"SUM",(Ne={},Object(D.a)(Ne,"ALL",ya),Object(D.a)(Ne,"TOTAL",[qe]),Ne)),Object(D.a)(Me,"AVERAGE",(Pe={},Object(D.a)(Pe,"ALL",Aa),Object(D.a)(Pe,"TOTAL",[ra]),Pe)),Me)),Object(D.a)(We,"FAVORITES_SAVED",Oa),Object(D.a)(We,"USERS",Da),Object(D.a)(We,"DATA_VALUES",[fa]),We),Sa=["#7cb5ec","#CC6600","#CCCC00","#66CC00","#ff0066","#000000","#00CCCC"],ja={animation:{duration:180},legend:{position:"bottom"},responsive:!0,tooltips:{mode:"nearest"},scales:{xAxes:[{display:!0,scaleLabel:{display:!0},ticks:{maxRotation:45,minRotation:45}}],yAxes:[{display:!0,scaleLabel:{display:!0,labelString:c.a.t("Values")},ticks:{suggestedMin:0,precision:0}}]}},Ca={backgroundColor:"rgba(0, 0, 0, 0)",fill:!1,lineTension:0},wa=1;function Ra(e,a){for(var t=e.aggregationLevel,n=e.category,r=e.chartType,l=e.interval,s=[],o=[],c=N[n].label,i=N[n].subtitle,u=wa,v=null,b=n===I?ka[n][t][r]:ka[n],d=a.length,m=b.length,p=0;p<d;p++){var g=a[p];s.push(L(g,l));for(var h=0;h<m;h++){var E=b[h];0===p&&o.push(Object(T.a)({},Ca,{label:E.label,data:[],borderColor:Sa[h]}));var f=g[E.key];f>u&&(u=f),(null===v||f<v)&&(v=f),o[h].data.push(f)}}return ja.scales.yAxes[0].ticks.suggestedMax=u,ja.scales.yAxes[0].ticks.suggestedMin=v,{data:{labels:s,datasets:o},options:ja,title:c,subtitle:i}}t(386);var Va="uua-data-container uua-chart-container",_a=" uua-data-container--loading";var La=Object(i.b)(function(e){var a=e.usageData,t=e.filter,n=t.category===F||a===p,r=a===d;return{shouldHide:n,loading:r,chartConfig:n||r?null:Ra(t,a)}})(function(e){var a,t=e.shouldHide,l=e.loading,s=e.chartConfig;if(t)return null;if(l)a=r.a.createElement(Z.a,{overlay:!0});else{var o=s.options,c=s.data,i=s.title,u=s.subtitle;a=r.a.createElement(n.Fragment,null,r.a.createElement("h4",{className:"uaa-chart-title"},i),r.a.createElement("h6",{className:"uaa-chart-subtitle"},u),r.a.createElement(ze.a,{data:c,options:o}))}var v=l?Va+_a:Va;return r.a.createElement("div",{className:v},a)}),Ua=(t(388),"uua-data-container"),Ia=" uua-data-container--loading",Fa=function(e){var a=e.headers;return r.a.createElement("thead",null,r.a.createElement("tr",null,a.map(function(e,a){return r.a.createElement("th",{key:"h-".concat(a)},e)})))},Na=function(e){var a=e.rows;return r.a.createElement("tbody",null,a.map(function(e,a){return r.a.createElement(Pa,{key:"row-".concat(a),cells:e})}))},Pa=function(e){var a=e.cells;return r.a.createElement("tr",null,a.map(function(e,a){return r.a.createElement("td",{key:"cell-".concat(a)},e)}))};function Ma(e,a){var t=e.aggregationLevel,n=e.category,r=e.interval,l=n===I?Ta[n][t]:Ta[n];return{headers:l.map(function(e){return e.label}),rows:a.map(function(e){return l.map(function(a){return a.key===Ge.key?L(e,r):a.key===Ea.key?U(e[a.key]):e[a.key]})})}}var Wa=Object(i.b)(function(e){var a=e.usageData,t=e.filter,n=a===p,r=a===d;return{error:n,loading:r,tableData:r||n?null:Ma(t,a)}})(function(e){var a,t=e.error,n=e.loading,l=e.tableData;if(t)a=r.a.createElement(Ee,{message:c.a.t("There was an error retrieving the usage analytics data")});else if(n)a=r.a.createElement(Z.a,{overlay:!0});else{var s=l.headers,o=l.rows;a=r.a.createElement("table",{className:"uaa-data-table"},r.a.createElement(Fa,{headers:s}),r.a.createElement(Na,{rows:o}))}var i=n?Ua+Ia:Ua;return r.a.createElement("div",{className:i},a)}),xa=function(e){function a(){return Object(K.a)(this,a),Object($.a)(this,Object(q.a)(a).apply(this,arguments))}return Object(X.a)(a,e),Object(Q.a)(a,[{key:"componentDidMount",value:function(){this.props.initApp()}},{key:"render",value:function(){var e=this.props.appStatus;return e===d?r.a.createElement(Z.b,{overlay:!0,size:"large"}):e===p?r.a.createElement(Ee,{message:c.a.t("ERROR: Could not load app")}):r.a.createElement("main",{className:"uaa-container"},r.a.createElement(xe,null),r.a.createElement("section",{className:"uaa-content"},r.a.createElement(La,null),r.a.createElement(Wa,null)))}}]),a}(n.Component),za=Object(i.b)(function(e){return{appStatus:e.appStatus}},{initApp:function(){return function(){var e=Object(te.a)(ae.a.mark(function e(a,t){var n;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue(t());case 3:n=e.sent,a(he(g,n)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),a(he(h,e.t0));case 11:case"end":return e.stop()}},e,this,[[0,7]])}));return function(a,t){return e.apply(this,arguments)}}()}})(xa);t(389),t(390),t(18);var Ga=function(){return r.a.createElement(i.a,{store:J},r.a.createElement(u.a,{appName:c.a.t("Usage Analytics")}),r.a.createElement(za,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(Ga,null),document.getElementById("uaa-root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[191,1,2]]]);
//# sourceMappingURL=main.c5d3ca6b.chunk.js.map