(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{162:function(e){e.exports={"Usage Analytics":"",Values:"","Please use the format yyyy-mm-dd":"","End date is before start date":"","Start date is after end date":"","Start Date":"","End date":"",Category:"",Interval:"","Aggregation Level":"","Chart Type":"","Event Type":"","Page Size":"","Sort Order":"","There was an error retrieving the usage analytics data":"",Sum:"",Average:"","Favorite views":"","Number of times users looked at analysis favorites":"","Favorites saved":"","Number of analysis favorites created by users":"",Users:"","Number of users in the system":"","Top favorites":"","Data values":"","Number of data values saved in the system":"",All:"",Total:"",Chart:"",Map:"","Report table":"","Event report":"","Event chart":"",Dashboard:"","Data set report":"",Day:"",Week:"",Month:"",Year:"",Date:"","Pivot Table":"","Event Report":"","Event Chart":"","Data Set Report":"","Average Map":"","Average Chart":"","Average Pivot Table":"","Average Event Report":"","Average Event Chart":"","Average Dashboard":"",Maps:"",Charts:"","Pivot Tables":"","Event Reports":"","Event Charts":"",Dashboards:"",Indicators:"","Active Users":"","Total Users":"",Position:"",Name:"",Views:"",ID:"",Created:"","Data Values":"",Ascending:"",Descending:""}},191:function(e,a,t){e.exports=t(413)},196:function(e,a,t){},209:function(e,a,t){},210:function(e,a,t){},247:function(e,a,t){},248:function(e,a,t){},387:function(e,a,t){},389:function(e,a,t){},413:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(159),s=t.n(l),c=(t(196),t(2)),o=t.n(c),i=t(9),u=t(183),v=t(43),d=t(161),b=(t(201),"LOADING"),g="READY",E="ERROR",h="APP_LOAD_SUCCESS",m="APP_LOAD_ERROR",p="USAGE_DATA_REQUESTED",f="USAGE_DATA_RECEIVED",y="USAGE_DATA_ERRORED",D="FILTER_UPDATED";var O,A=t(6),S=t(34),k="FAVORITE_VIEWS",j="TOP_FAVORITES",C=(O={},Object(A.a)(O,k,{value:k,label:o.a.t("Favorite views"),subtitle:o.a.t("Number of times users looked at analysis favorites")}),Object(A.a)(O,"FAVORITES_SAVED",{value:"FAVORITES_SAVED",label:o.a.t("Favorites saved"),subtitle:o.a.t("Number of analysis favorites created by users")}),Object(A.a)(O,"USERS",{value:"USERS",label:o.a.t("Users"),subtitle:o.a.t("Number of users in the system")}),Object(A.a)(O,j,{value:j,label:o.a.t("Top favorites")}),Object(A.a)(O,"DATA_VALUES",{value:"DATA_VALUES",label:o.a.t("Data values"),subtitle:o.a.t("Number of data values saved in the system")}),O),T=[C.FAVORITE_VIEWS,C.FAVORITES_SAVED,C.USERS,C.TOP_FAVORITES,C.DATA_VALUES],w="DAY",R="WEEK",V="MONTH",N="YEAR",_=[{value:w,label:o.a.t("Day")},{value:R,label:o.a.t("Week")},{value:V,label:o.a.t("Month")},{value:N,label:o.a.t("Year")}],F="SUM",U=[{value:F,label:o.a.t("Sum")},{value:"AVERAGE",label:o.a.t("Average")}],L="TOTAL",I=[{value:"ALL",label:o.a.t("All")},{value:L,label:o.a.t("Total")}],P="CHART_VIEW",M=[{value:P,label:o.a.t("Chart")},{value:"MAP_VIEW",label:o.a.t("Map")},{value:"REPORT_TABLE_VIEW",label:o.a.t("Report table")},{value:"EVENT_REPORT_VIEW",label:o.a.t("Event report")},{value:"EVENT_CHART_VIEW",label:o.a.t("Event chart")},{value:"DASHBOARD_VIEW",label:o.a.t("Dashboard")},{value:"DATA_SET_REPORT_VIEW",label:o.a.t("Data set report")}],x="ASC",W=[{value:x,label:o.a.t("Ascending")},{value:"DESC",label:o.a.t("Descending")}];function G(e){var a=e.getFullYear(),t=""+(e.getMonth()+1),n=""+e.getDate();return t.length<2&&(t="0"+t),n.length<2&&(n="0"+n),[a,t,n].join("-")}var z=[d.a];var J=Object(v.c)({appStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b;switch((arguments.length>1?arguments[1]:void 0).type){case h:return g;case m:return E;default:return e}},locale:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case h:return n.locale;default:return e}},usageData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case p:return b;case h:return n.usageData;case f:return n;case y:return E;default:return e}},filter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){var a=new Date(e.valueOf());return a.setMonth(a.getMonth()-4),{category:k,startDate:G(a),endDate:G(e),interval:R,aggregationLevel:F,chartType:L,eventType:P,pageSize:25,sortOrder:x}}(new Date),a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case D:return Object(S.a)({},e,Object(A.a)({},n.key,n.value));default:return e}}}),H=Object(v.d)(J,v.a.apply(void 0,z)),Y=t(76),B=t(77),K=t(84),Q=t(78),$=t(83),q=t(42),X=t(57),Z=t.n(X),ee=t(114),ae=t(184),te=t(185),ne=t(186),re=t(110),le=t.n(re),se=t(162);le.a.locale("en"),o.a.addResources("en","usage-analytics-app",se),o.a.setDefaultNamespace("usage-analytics-app"),o.a.changeLanguage("en");var ce=o.a;var oe={initApp:ie,getUsageData:ue,getFavorites:function(e){var a=e.eventType,t=e.pageSize,n=e.sortOrder,r="eventType=".concat(a,"&pageSize=").concat(t,"&sortOrder=").concat(n,"&_=").concat(Date.now());return oe.getJSON("dataStatistics/favorites?".concat(r))},getDataStatistics:function(e){var a=e.startDate,t=e.endDate,n=e.interval,r="startDate=".concat(a,"&endDate=").concat(t,"&interval=").concat(n,"&_=").concat(Date.now());return oe.getJSON("dataStatistics?".concat(r))},getUserLocale:function(){return oe.getJSON("userSettings").then(function(e){return e.keyUiLocale})},getJSON:function(e){return Object(te.a)(e).then(function(e){return e.json()}).then(ve)},handleJSON:ve};function ie(e){var a=e.filter;return Promise.all([oe.getUserLocale(),oe.getUsageData(a)]).then(function(e){var a=Object(ae.a)(e,2),t=a[0],n=a[1];return function(e){ce.changeLanguage(e),Object(ne.a)(e)}(t),{usageData:n,locale:t}})}function ue(e){return e.category===j?oe.getFavorites(e):oe.getDataStatistics(e)}function ve(e){if("ERROR"===e.status)throw new Error(e.message);return e}var de=function(e,a){return function(t,n){return t(be(e,a)),ge(n().filter,t)}},be=function(e,a){return he(D,{key:e,value:a})};function ge(e,a){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(ee.a)(Z.a.mark(function e(a,t){var n;return Z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(he(p)),e.prev=1,e.next=4,ue(a);case 4:n=e.sent,t(he(f,n)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0),t(he(y,e.t0));case 12:case"end":return e.stop()}},e,this,[[1,8]])}))).apply(this,arguments)}function he(e,a){return{type:e,payload:a}}t(209);var me=function(e){var a=e.message;return r.a.createElement("div",{className:"uaa-error"},a)},pe=t(187);t(210);var fe,ye=[{value:5,label:"5"},{value:10,label:"10"},{value:15,label:"15"},{value:20,label:"20"},{value:25,label:"25"}],De=(fe=pe.a,function(e){return r.a.createElement("div",{className:"uaa-fieldwrap"},r.a.createElement(fe,e))}),Oe=t(188),Ae=t(40),Se=(t(247),o.a.t("Please use the format yyyy-mm-dd")),ke=o.a.t("End date is before start date"),je=o.a.t("Start date is after end date"),Ce=function(e){function a(e){var t;return Object(Y.a)(this,a),(t=Object(K.a)(this,Object(Q.a)(a).call(this,e))).state={startDateError:null,endDateError:null},t.onStartDateChange=t.onStartDateChange.bind(Object(Ae.a)(Object(Ae.a)(t))),t.onEndDateChange=t.onEndDateChange.bind(Object(Ae.a)(Object(Ae.a)(t))),t}return Object($.a)(a,e),Object(B.a)(a,[{key:"onStartDateChange",value:function(e){this.onChange("startDate",e.target.value)}},{key:"onEndDateChange",value:function(e){this.onChange("endDate",e.target.value)}},{key:"onChange",value:function(e,a){var t,n=this.props,r=n.updateFilter,l=n.updateFilterAndGetData,s=Object(Oe.a)(n,["updateFilter","updateFilterAndGetData"]),c="".concat(e,"Error"),o="".concat("startDate"===e?"endDate":"startDate","Error"),i=this.getError(Object(S.a)({},s,Object(A.a)({},e,a)),e),u=this.state[o]===Se?Se:null;this.state[c]!==i&&this.setState((t={},Object(A.a)(t,c,i),Object(A.a)(t,o,u),t));i?r(e,a):l(e,a)}},{key:"getError",value:function(e,a){return/[0-9]{4}-[0-9]{2}-[0-9]{2}/.test(e[a])?e.endDate<e.startDate?"startDate"===a?je:ke:null:Se}},{key:"render",value:function(){var e=this.props,a=e.startDate,t=e.endDate,n=this.state,l=n.startDateError,s=n.endDateError;return r.a.createElement("div",{className:"uaa-date-range"},r.a.createElement("div",{className:"uaa-date-field uaa-fieldwrap"},r.a.createElement("label",null,o.a.t("Start Date")),r.a.createElement("input",{className:"startDate",type:"date",value:a,onChange:this.onStartDateChange}),l&&r.a.createElement("span",{className:"uaa-date-input-error ".concat("startDate")},l)),r.a.createElement("div",{className:"uaa-date-field uaa-fieldwrap"},r.a.createElement("label",null,o.a.t("End date")),r.a.createElement("input",{className:"endDate",type:"date",value:t,onChange:this.onEndDateChange}),s&&r.a.createElement("span",{className:"uaa-date-input-error ".concat("endDate")},s)))}}]),a}(n.Component),Te=Object(i.b)(Le("category"),{onChange:function(e,a){return function(t,n){var r=n().filter,l=r.category;if(t(be(e,a)),function(e,a){return e!==a&&(a===j&&e!==j||e===j&&a!==j)}(l,a))return ge(Object(S.a)({},r,{category:a}),t)}}})(function(e){return r.a.createElement(De,Object.assign({},e,{name:"category",list:T,label:o.a.t("Category"),kind:"filled"}))}),we=Object(i.b)(function(e){return{startDate:e.filter.startDate,endDate:e.filter.endDate}},{updateFilter:be,updateFilterAndGetData:de})(Ce),Re=Object(i.b)(Le("interval"),{onChange:de})(function(e){return r.a.createElement(De,Object.assign({},e,{name:"interval",list:_,label:o.a.t("Interval"),kind:"filled"}))}),Ve=Object(i.b)(Le("aggregationLevel"),{onChange:be})(function(e){return r.a.createElement(De,Object.assign({},e,{name:"aggregationLevel",list:U,label:o.a.t("Aggregation Level"),kind:"filled"}))}),Ne=Object(i.b)(Le("chartType"),{onChange:be})(function(e){return r.a.createElement(De,Object.assign({},e,{name:"chartType",list:I,label:o.a.t("Chart Type"),kind:"filled"}))}),_e=Object(i.b)(Le("eventType"),{onChange:de})(function(e){return r.a.createElement(De,Object.assign({},e,{name:"eventType",list:M,label:o.a.t("Event Type"),kind:"filled"}))}),Fe=Object(i.b)(Le("pageSize"),{onChange:de})(function(e){return r.a.createElement(De,Object.assign({},e,{name:"pageSize",list:ye,label:o.a.t("Page Size"),kind:"filled"}))}),Ue=Object(i.b)(Le("sortOrder"),{onChange:de})(function(e){return r.a.createElement(De,Object.assign({},e,{name:"sortOrder",list:W,label:o.a.t("Sort Order"),kind:"filled"}))});function Le(e){return function(a){return{value:a.filter[e]}}}t(248);var Ie,Pe,Me,xe,We,Ge,ze=Object(i.b)(function(e){var a=e.filter.category;return{showDateFields:a!==j,showTopFavoritesFields:a===j,showFavoriteViewsFields:a===k}})(function(e){var a=e.showDateFields,t=e.showFavoriteViewsFields,l=e.showTopFavoritesFields;return r.a.createElement("aside",{className:"uaa-filter-sidebar"},r.a.createElement("h1",{className:"uaa-app-header"},o.a.t("Usage Analytics")),r.a.createElement(Te,null),a&&r.a.createElement(n.Fragment,null,r.a.createElement(we,null),r.a.createElement(Re,null)),t&&r.a.createElement(n.Fragment,null,r.a.createElement(Ve,null),r.a.createElement(Ne,null)),l&&r.a.createElement(n.Fragment,null,r.a.createElement(_e,null),r.a.createElement(Fe,null),r.a.createElement(Ue,null)))}),Je=t(174),He={key:"date",label:o.a.t("Date")},Ye={key:"mapViews",label:o.a.t("Map")},Be={key:"chartViews",label:o.a.t("Chart")},Ke={key:"pivotTableViews",label:o.a.t("Pivot Table")},Qe={key:"eventReportViews",label:o.a.t("Event Report")},$e={key:"eventChartViews",label:o.a.t("Event Chart")},qe={key:"dashboardViews",label:o.a.t("Dashboard")},Xe={key:"dataSetReportViews",label:o.a.t("Data Set Report")},Ze={key:"totalViews",label:o.a.t("Total")},ea={key:"averageMapViews",label:o.a.t("Average Map")},aa={key:"averageChartViews",label:o.a.t("Average Chart")},ta={key:"averagePivotTableViews",label:o.a.t("Average Pivot Table")},na={key:"averageEventReportViews",label:o.a.t("Average Event Report")},ra={key:"averageEventChartViews",label:o.a.t("Average Event Chart")},la={key:"averageDashboardViews",label:o.a.t("Average Dashboard")},sa={key:"averageViews",label:o.a.t("Average")},ca={key:"savedMaps",label:o.a.t("Maps")},oa={key:"savedCharts",label:o.a.t("Charts")},ia={key:"savedPivotTables",label:o.a.t("Pivot Tables")},ua={key:"savedEventReports",label:o.a.t("Event Reports")},va={key:"savedEventCharts",label:o.a.t("Event Charts")},da={key:"savedDashboards",label:o.a.t("Dashboards")},ba={key:"savedIndicators",label:o.a.t("Indicators")},ga={key:"activeUsers",label:o.a.t("Active Users")},Ea={key:"users",label:o.a.t("Total Users")},ha={key:"position",label:o.a.t("Position")},ma={key:"name",label:o.a.t("Name")},pa={key:"views",label:o.a.t("Views")},fa={key:"id",label:o.a.t("ID")},ya={key:"created",label:o.a.t("Created")},Da={key:"savedDataValues",label:o.a.t("Data Values")},Oa=[Ye,Be,Ke,Qe,$e,qe,Xe],Aa=[ea,aa,ta,na,ra,la],Sa=[ca,oa,ia,ua,va,da,ba],ka=[ga,Ea],ja=(Pe={},Object(A.a)(Pe,k,(Ie={},Object(A.a)(Ie,F,[He].concat(Oa,[Ze])),Object(A.a)(Ie,"AVERAGE",[He].concat(Aa,[sa])),Ie)),Object(A.a)(Pe,"FAVORITES_SAVED",[He].concat(Sa)),Object(A.a)(Pe,"USERS",[He].concat(ka)),Object(A.a)(Pe,j,[ha,ma,pa,fa,ya]),Object(A.a)(Pe,"DATA_VALUES",[He,Da]),Pe),Ca=(Ge={},Object(A.a)(Ge,k,(We={},Object(A.a)(We,F,(Me={},Object(A.a)(Me,"ALL",Oa),Object(A.a)(Me,L,[Ze]),Me)),Object(A.a)(We,"AVERAGE",(xe={},Object(A.a)(xe,"ALL",Aa),Object(A.a)(xe,L,[sa]),xe)),We)),Object(A.a)(Ge,"FAVORITES_SAVED",Sa),Object(A.a)(Ge,"USERS",ka),Object(A.a)(Ge,"DATA_VALUES",[Da]),Ge),Ta={yyyymmdd:{day:"numeric",month:"short",year:"numeric"},yyyymm:{month:"short",year:"numeric"}},wa=o.a.t("Week");function Ra(e,a){var t=e.year,n=e.month,r=e.week,l=e.day;switch(a){case N:return t;case V:return Va("".concat(t,"-").concat(n),Ta.yyyymm);case R:return"".concat(wa," ").concat(r," / ").concat(t);case w:default:return Va("".concat(t,"-").concat(n,"-").concat(l))}}function Va(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ta.yyyymmdd,t=H.getState().locale||"en",n=new Date(e);return new Intl.DateTimeFormat(t,a).format(n)}var Na=["#7cb5ec","#CC6600","#CCCC00","#66CC00","#ff0066","#000000","#00CCCC"],_a={animation:{duration:180},legend:{position:"bottom"},responsive:!0,tooltips:{mode:"nearest"},scales:{xAxes:[{display:!0,scaleLabel:{display:!0},ticks:{maxRotation:45,minRotation:45}}],yAxes:[{display:!0,scaleLabel:{display:!0,labelString:o.a.t("Values")},ticks:{suggestedMin:0,precision:0}}]}},Fa={backgroundColor:"rgba(0, 0, 0, 0)",fill:!1,lineTension:0},Ua=1;function La(e,a){for(var t=e.aggregationLevel,n=e.category,r=e.chartType,l=e.interval,s=[],c=[],o=C[n].label,i=C[n].subtitle,u=Ua,v=null,d=n===k?Ca[n][t][r]:Ca[n],b=a.length,g=d.length,E=0;E<b;E++){var h=a[E];s.push(Ra(h,l));for(var m=0;m<g;m++){var p=d[m];0===E&&c.push(Object(S.a)({},Fa,{label:p.label,data:[],borderColor:Na[m]}));var f=h[p.key];f>u&&(u=f),(null===v||f<v)&&(v=f),c[m].data.push(f)}}return _a.scales.yAxes[0].ticks.suggestedMax=u,_a.scales.yAxes[0].ticks.suggestedMin=v,{data:{labels:s,datasets:c},options:_a,title:o,subtitle:i}}t(387);var Ia="uua-data-container uua-chart-container",Pa=" uua-data-container--loading";var Ma=Object(i.b)(function(e){var a=e.usageData,t=e.filter,n=t.category===j||a===E,r=a===b;return{shouldHide:n,loading:r,chartConfig:n||r?null:La(t,a)}})(function(e){var a,t=e.shouldHide,l=e.loading,s=e.chartConfig;if(t)return null;if(l)a=r.a.createElement(q.a,{overlay:!0});else{var c=s.options,o=s.data,i=s.title,u=s.subtitle;a=r.a.createElement(n.Fragment,null,r.a.createElement("h4",{className:"uaa-chart-title"},i),r.a.createElement("h6",{className:"uaa-chart-subtitle"},u),r.a.createElement(Je.a,{data:o,options:c}))}var v=l?Ia+Pa:Ia;return r.a.createElement("div",{className:v},a)}),xa=(t(389),"uua-data-container"),Wa=" uua-data-container--loading",Ga=function(e){var a=e.headers;return r.a.createElement("thead",null,r.a.createElement("tr",null,a.map(function(e,a){return r.a.createElement("th",{key:"h-".concat(a)},e)})))},za=function(e){var a=e.rows;return r.a.createElement("tbody",null,a.map(function(e,a){return r.a.createElement(Ja,{key:"row-".concat(a),cells:e})}))},Ja=function(e){var a=e.cells;return r.a.createElement("tr",null,a.map(function(e,a){return r.a.createElement("td",{key:"cell-".concat(a)},e)}))};function Ha(e,a){var t=e.aggregationLevel,n=e.category,r=e.interval,l=n===k?ja[n][t]:ja[n];return{headers:l.map(function(e){return e.label}),rows:a.map(function(e){return l.map(function(a){return a.key===He.key?Ra(e,r):a.key===ya.key?Va(e[a.key]):e[a.key]})})}}var Ya=Object(i.b)(function(e){var a=e.usageData,t=e.filter,n=a===E,r=a===b;return{error:n,loading:r,tableData:r||n?null:Ha(t,a)}})(function(e){var a,t=e.error,n=e.loading,l=e.tableData;if(t)a=r.a.createElement(me,{message:o.a.t("There was an error retrieving the usage analytics data")});else if(n)a=r.a.createElement(q.a,{overlay:!0});else{var s=l.headers,c=l.rows;a=r.a.createElement("table",{className:"uaa-data-table"},r.a.createElement(Ga,{headers:s}),r.a.createElement(za,{rows:c}))}var i=n?xa+Wa:xa;return r.a.createElement("div",{className:i},a)}),Ba=function(e){function a(){return Object(Y.a)(this,a),Object(K.a)(this,Object(Q.a)(a).apply(this,arguments))}return Object($.a)(a,e),Object(B.a)(a,[{key:"componentDidMount",value:function(){this.props.initApp()}},{key:"render",value:function(){var e=this.props.appStatus;return e===b?r.a.createElement(q.b,{overlay:!0,size:"large"}):e===E?r.a.createElement(me,{message:o.a.t("ERROR: Could not load app")}):r.a.createElement("main",{className:"uaa-container"},r.a.createElement(ze,null),r.a.createElement("section",{className:"uaa-content"},r.a.createElement(Ma,null),r.a.createElement(Ya,null)))}}]),a}(n.Component),Ka=Object(i.b)(function(e){return{appStatus:e.appStatus}},{initApp:function(){return function(){var e=Object(ee.a)(Z.a.mark(function e(a,t){var n;return Z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ie(t());case 3:n=e.sent,a(he(h,n)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),a(he(m,e.t0));case 11:case"end":return e.stop()}},e,this,[[0,7]])}));return function(a,t){return e.apply(this,arguments)}}()}})(Ba);t(390),t(391),t(18);var Qa=function(){return r.a.createElement(i.a,{store:H},r.a.createElement(u.a,{appName:o.a.t("Usage Analytics")}),r.a.createElement(Ka,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(Qa,null),document.getElementById("uaa-root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[191,1,2]]]);
//# sourceMappingURL=main.91321946.chunk.js.map