{"version":3,"sources":["D2App/constants/categories.js","D2App/constants/intervals.js","D2App/constants/aggregations.js","D2App/constants/chartTypes.js","D2App/constants/eventTypes.js","D2App/constants/sortOrders.js","D2App/reducers/filter.js","D2App/store.js","D2App/reducers/appStatus.js","D2App/constants/statuses.js","D2App/actions/types.js","D2App/reducers/usageData.js","D2App/api/get.js","D2App/api/index.js","D2App/actions/index.js","D2App/components/Error.js","D2App/constants/pageSizes.js","D2App/components/FilterFields/dropDownComponents.js","D2App/components/FilterFields/DateRange.js","D2App/components/FilterFields/index.js","D2App/components/FilterSideBar.js","D2App/constants/properties.js","D2App/constants/fields.js","D2App/utils/date.js","D2App/components/Chart/config.js","D2App/components/Chart/parseChartData.js","D2App/components/Chart/index.js","D2App/components/Table.js","D2App/components/UsageAnalytics.js","D2App/components/App.js"],"names":["CATEGORIES","value","label","i18n","t","subtitle","INTERVALS","AGGREGATIONS","CHART_TYPES","EVENT_TYPES","SORT_ORDERS","getInitialState","endDate","startDate","Date","valueOf","setMonth","getMonth","category","parseDate","interval","aggregationLevel","chartType","eventType","pageSize","sortOrder","date","year","getFullYear","month","day","getDate","length","join","middlewares","ReduxThunk","rootReducer","combineReducers","appStatus","state","type","usageData","payload","filter","key","createStore","applyMiddleware","defaultConfig","method","credentials","getJSON","baseUrl","path","config","fetch","then","response","ok","Error","statusText","Promise","reject","get","json","data","status","message","api","getFavorites","queryParams","now","getDataStatistics","setBaseUrl","url","getUsageData","updateCategory","dispatch","getState","oldCategory","updateFilter","newCategory","isNewDataRequiredAfterCategoryChange","updateFilterAndGetData","name","createAction","a","async","className","PAGE_SIZES","DropDown","options","rest","selected","map","ERROR_PATTERN","ERROR_MISSING_DATE","ERROR_END_BEFORE_START","ERROR_START_AFTER_END","DateRange","props","startDateError","endDateError","onStartDateChange","bind","onEndDateChange","updateUsageData","debounce","this","onChange","dateRange","errorKey","otherErrorKey","error","getError","otherError","setState","test","validationText","dataTest","Component","CategoryDropDown","connect","createValueGetterForFilterKey","DateRangeComponent","IntervalDropDown","createFilterUpdater","AggregationLevelDropDown","ChartTypeDropDown","EventTypeDropDown","PageSizeDropDown","SortOrderDropDown","updaterFn","filterKey","showDateFields","showTopFavoritesFields","showFavoriteViewsFields","mapViews","chartViews","pivotTableViews","eventReportViews","eventChartViews","dashboardViews","dataSetReportViews","totalViews","averageMapViews","averageChartViews","averagePivotTableViews","averageEventReportViews","averageEventChartViews","averageDashboardViews","averageViews","savedMaps","savedCharts","savedPivotTables","savedEventReports","savedEventCharts","savedDashboards","savedIndicators","activeUsers","users","position","views","id","created","savedDataValues","FAVORITE_VIEWS_SUM_FIELDS","PROPS","FAVORITE_VIEWS_AVG_FIELDS","FAVORITES_SAVED_FIELDS","USERS_FIELDS","TABLE_FIELDS","CHART_FIELDS","dateFormats","yyyymmdd","yyyymm","weekStr","getDisplayDateForInterval","week","getDisplayDateFromYearMonthDay","getDisplayDate","dateFormatOptions","locale","store","Intl","DateTimeFormat","format","colors","animation","duration","legend","responsive","maintainAspectRatio","tooltips","mode","scales","xAxes","display","scaleLabel","ticks","maxRotation","minRotation","yAxes","labelString","suggestedMin","precision","dataSet","backgroundColor","fill","lineTension","parseChartData","dataPoints","labels","datasets","find","c","max","min","fields","FIELDS","dataPointsLen","fieldsLen","dataPointIndex","dataPoint","push","fieldIndex","field","borderColor","pointValue","suggestedMax","onResize","onChartResize","title","chart","resize","shouldHide","loading","chartConfig","content","overlay","baseClassName","TableHead","headers","header","i","TableBody","rows","row","cells","TableRow","text","parseTableData","dateField","createdField","isoString","tableData","UsageAnalytics","initApp","translucent","large","App","useConfig"],"mappings":"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","file":"static/js/app.1f2db3b7.chunk.js","sourcesContent":["import i18n from '@dhis2/d2-i18n';\nexport const FAVORITE_VIEWS = 'FAVORITE_VIEWS';\nexport const FAVORITES_SAVED = 'FAVORITES_SAVED';\nexport const USERS = 'USERS';\nexport const TOP_FAVORITES = 'TOP_FAVORITES';\nexport const DATA_VALUES = 'DATA_VALUES';\nconst CATEGORIES = [{\n  value: FAVORITE_VIEWS,\n  label: i18n.t('Favorite views'),\n  subtitle: i18n.t('Number of times users looked at analysis favorites')\n}, {\n  value: FAVORITES_SAVED,\n  label: i18n.t('Favorites saved'),\n  subtitle: i18n.t('Number of analysis favorites created by users')\n}, {\n  value: USERS,\n  label: i18n.t('Users'),\n  subtitle: i18n.t('Number of users in the system')\n}, {\n  value: TOP_FAVORITES,\n  label: i18n.t('Top favorites')\n}, {\n  value: DATA_VALUES,\n  label: i18n.t('Data values'),\n  subtitle: i18n.t('Number of data values saved in the system')\n}];\nexport default CATEGORIES;","import i18n from '@dhis2/d2-i18n';\nexport const DAY = 'DAY';\nexport const WEEK = 'WEEK';\nexport const MONTH = 'MONTH';\nexport const YEAR = 'YEAR';\nconst INTERVALS = [{\n  value: DAY,\n  label: i18n.t('Day')\n}, {\n  value: WEEK,\n  label: i18n.t('Week')\n}, {\n  value: MONTH,\n  label: i18n.t('Month')\n}, {\n  value: YEAR,\n  label: i18n.t('Year')\n}];\nexport default INTERVALS;","import i18n from '@dhis2/d2-i18n';\nexport const SUM = 'SUM';\nexport const AVERAGE = 'AVERAGE';\nconst AGGREGATIONS = [{\n  value: SUM,\n  label: i18n.t('Sum')\n}, {\n  value: AVERAGE,\n  label: i18n.t('Average')\n}];\nexport default AGGREGATIONS;","import i18n from '@dhis2/d2-i18n';\nexport const ALL = 'ALL';\nexport const TOTAL = 'TOTAL';\nconst CHART_TYPES = [{\n  value: ALL,\n  label: i18n.t('All')\n}, {\n  value: TOTAL,\n  label: i18n.t('Total')\n}];\nexport default CHART_TYPES;","import i18n from '@dhis2/d2-i18n';\nexport const CHART_VIEW = 'CHART_VIEW';\nexport const MAP_VIEW = 'MAP_VIEW';\nexport const REPORT_TABLE_VIEW = 'REPORT_TABLE_VIEW';\nexport const EVENT_REPORT_VIEW = 'EVENT_REPORT_VIEW';\nexport const EVENT_CHART_VIEW = 'EVENT_CHART_VIEW';\nexport const DASHBOARD_VIEW = 'DASHBOARD_VIEW';\nexport const DATA_SET_REPORT_VIEW = 'DATA_SET_REPORT_VIEW';\nconst EVENT_TYPES = [{\n  value: CHART_VIEW,\n  label: i18n.t('Chart')\n}, {\n  value: MAP_VIEW,\n  label: i18n.t('Map')\n}, {\n  value: REPORT_TABLE_VIEW,\n  label: i18n.t('Report table')\n}, {\n  value: EVENT_REPORT_VIEW,\n  label: i18n.t('Event report')\n}, {\n  value: EVENT_CHART_VIEW,\n  label: i18n.t('Event chart')\n}, {\n  value: DASHBOARD_VIEW,\n  label: i18n.t('Dashboard')\n}, {\n  value: DATA_SET_REPORT_VIEW,\n  label: i18n.t('Data set report')\n}];\nexport default EVENT_TYPES;","import i18n from '@dhis2/d2-i18n';\nexport const ASC = 'ASC';\nexport const DESC = 'DESC';\nconst SORT_ORDERS = [{\n  value: ASC,\n  label: i18n.t('Ascending')\n}, {\n  value: DESC,\n  label: i18n.t('Descending')\n}];\nexport default SORT_ORDERS;","import { FILTER_UPDATED } from '../actions/types';\nimport { FAVORITE_VIEWS } from '../constants/categories';\nimport { WEEK } from '../constants/intervals';\nimport { SUM } from '../constants/aggregations';\nimport { ALL } from '../constants/chartTypes';\nimport { CHART_VIEW } from '../constants/eventTypes';\nimport { ASC } from '../constants/sortOrders';\nexport default function filter(state = getInitialState(new Date()), {\n  type,\n  payload\n}) {\n  switch (type) {\n    case FILTER_UPDATED:\n      return { ...state,\n        [payload.key]: payload.value\n      };\n\n    default:\n      return state;\n  }\n}\nexport function getInitialState(endDate) {\n  const startDate = new Date(endDate.valueOf());\n  startDate.setMonth(startDate.getMonth() - 4);\n  return {\n    category: FAVORITE_VIEWS,\n    startDate: parseDate(startDate),\n    endDate: parseDate(endDate),\n    interval: WEEK,\n    aggregationLevel: SUM,\n    chartType: ALL,\n    eventType: CHART_VIEW,\n    pageSize: '25',\n    sortOrder: ASC\n  };\n}\nexport function parseDate(date) {\n  const year = date.getFullYear();\n  let month = '' + (date.getMonth() + 1);\n  let day = '' + date.getDate();\n  if (month.length < 2) month = '0' + month;\n  if (day.length < 2) day = '0' + day;\n  return [year, month, day].join('-');\n}","import { createStore, applyMiddleware, combineReducers } from 'redux';\nimport ReduxThunk from 'redux-thunk';\nimport logger from 'redux-logger';\nimport appStatus from './reducers/appStatus';\nimport usageData from './reducers/usageData';\nimport filter from './reducers/filter';\nconst middlewares = [ReduxThunk];\nconst shouldLog = false;\n\nif (process.env.NODE_ENV === 'development' && shouldLog) {\n  middlewares.push(logger);\n}\n\nconst rootReducer = combineReducers({\n  appStatus,\n  usageData,\n  filter\n});\nexport default createStore(rootReducer, applyMiddleware(...middlewares));","import { LOADING, READY, ERROR } from '../constants/statuses';\nimport { APP_LOAD_SUCCESS, APP_LOAD_ERROR } from '../actions/types';\nexport default function appStatus(state = LOADING, {\n  type\n}) {\n  switch (type) {\n    case APP_LOAD_SUCCESS:\n      return READY;\n\n    case APP_LOAD_ERROR:\n      return ERROR;\n\n    default:\n      return state;\n  }\n}","export const LOADING = 'LOADING';\nexport const READY = 'READY';\nexport const ERROR = 'ERROR';","// INITIALIZATION\nexport const APP_LOAD_SUCCESS = 'APP_LOAD_SUCCESS';\nexport const APP_LOAD_ERROR = 'APP_LOAD_ERROR'; // STATISTICS\n\nexport const USAGE_DATA_REQUESTED = 'USAGE_DATA_REQUESTED';\nexport const USAGE_DATA_RECEIVED = 'USAGE_DATA_RECEIVED';\nexport const USAGE_DATA_ERRORED = 'USAGE_DATA_ERRORED'; // FILTER\n\nexport const FILTER_UPDATED = 'FILTER_UPDATED';","import { LOADING, ERROR } from '../constants/statuses';\nimport { APP_LOAD_SUCCESS, USAGE_DATA_REQUESTED, USAGE_DATA_RECEIVED, USAGE_DATA_ERRORED } from '../actions/types';\nexport default function usageData(state = LOADING, {\n  type,\n  payload\n}) {\n  switch (type) {\n    case USAGE_DATA_REQUESTED:\n      return LOADING;\n\n    case APP_LOAD_SUCCESS:\n      return payload;\n\n    case USAGE_DATA_RECEIVED:\n      return payload;\n\n    case USAGE_DATA_ERRORED:\n      return ERROR;\n\n    default:\n      return state;\n  }\n}","const defaultConfig = {\n  method: 'GET',\n  credentials: 'include'\n};\nexport function get(baseUrl, path, config = defaultConfig) {\n  if (!baseUrl) {\n    return Promise.reject(new Error('A baseUrl must be passed'));\n  }\n\n  if (!path) {\n    return Promise.reject(new Error('A path must be passed'));\n  }\n\n  return fetch(`${baseUrl}/api/${path}`, config).then(response => {\n    if (response.ok) {\n      return response;\n    }\n\n    throw new Error(response.statusText);\n  });\n}\nexport function getJSON(baseUrl, path) {\n  return get(baseUrl, path).then(response => response.json()).then(data => {\n    if (data.status === 'ERROR') {\n      throw new Error(data.message);\n    } else {\n      return data;\n    }\n  });\n}","import { TOP_FAVORITES } from '../constants/categories';\nimport { getJSON } from './get';\n\nconst api = (() => {\n  let baseUrl = null;\n\n  const setBaseUrl = url => {\n    baseUrl = url;\n  };\n\n  const getFavorites = ({\n    eventType,\n    pageSize,\n    sortOrder\n  }) => {\n    const queryParams = `eventType=${eventType}&pageSize=${pageSize}&sortOrder=${sortOrder}&_=${Date.now()}`;\n    return getJSON(baseUrl, `dataStatistics/favorites?${queryParams}`);\n  };\n\n  const getDataStatistics = ({\n    startDate,\n    endDate,\n    interval\n  }) => {\n    const queryParams = `startDate=${startDate}&endDate=${endDate}&interval=${interval}&_=${Date.now()}`;\n    return getJSON(baseUrl, `dataStatistics?${queryParams}`);\n  };\n\n  const getUsageData = filter => {\n    return filter.category === TOP_FAVORITES ? getFavorites({\n      eventType: filter.eventType,\n      pageSize: filter.pageSize,\n      sortOrder: filter.sortOrder\n    }) : getDataStatistics({\n      startDate: filter.startDate,\n      endDate: filter.endDate,\n      interval: filter.interval\n    });\n  };\n\n  return {\n    setBaseUrl,\n    getFavorites,\n    getDataStatistics,\n    getUsageData\n  };\n})();\n\nexport default api;","import api from '../api';\nimport * as ACTIONS from '../actions/types';\nimport { TOP_FAVORITES } from '../constants/categories';\nexport const initApp = () => async (dispatch, getState) => {\n  try {\n    const payload = await api.getUsageData(getState().filter);\n    dispatch(createAction(ACTIONS.APP_LOAD_SUCCESS, payload));\n  } catch (error) {\n    dispatch(createAction(ACTIONS.APP_LOAD_ERROR, error));\n  }\n}; // Fetch data if category has changed from TOP_FAVORITES to anything else\n// or vice versa\n\nexport const updateCategory = value => (dispatch, getState) => {\n  const {\n    filter\n  } = getState();\n  const oldCategory = filter.category;\n  dispatch(updateFilter('category', value));\n\n  if (isNewDataRequiredAfterCategoryChange(oldCategory, value)) {\n    return getUsageData({ ...filter,\n      category: value\n    }, dispatch);\n  }\n};\nexport const updateFilterAndGetData = (name, value) => (dispatch, getState) => {\n  dispatch(updateFilter(name, value));\n  const {\n    filter\n  } = getState();\n  return getUsageData(filter, dispatch);\n};\nexport const updateUsageData = () => (dispatch, getState) => {\n  const {\n    filter\n  } = getState();\n  return getUsageData(filter, dispatch);\n};\nexport const updateFilter = (key, value) => createAction(ACTIONS.FILTER_UPDATED, {\n  key,\n  value\n});\nexport function isNewDataRequiredAfterCategoryChange(oldCategory, newCategory) {\n  return oldCategory !== newCategory && (newCategory === TOP_FAVORITES && oldCategory !== TOP_FAVORITES || oldCategory === TOP_FAVORITES && newCategory !== TOP_FAVORITES);\n}\n\nasync function getUsageData(filter, dispatch) {\n  dispatch(createAction(ACTIONS.USAGE_DATA_REQUESTED));\n\n  try {\n    const usageData = await api.getUsageData(filter);\n    dispatch(createAction(ACTIONS.USAGE_DATA_RECEIVED, usageData));\n  } catch (error) {\n    dispatch(createAction(ACTIONS.USAGE_DATA_ERRORED, error));\n  }\n}\n\nfunction createAction(type, payload) {\n  return {\n    type,\n    payload\n  };\n}","import React from 'react';\nimport PropTypes from '@dhis2/prop-types';\nimport './Error.css';\n\nfunction Error({\n  message\n}) {\n  return <div className=\"uaa-error\">{message}</div>;\n}\n\nError.propTypes = {\n  message: PropTypes.string\n};\nexport default Error;","export const PS_5 = '5';\nexport const PS_10 = '10';\nexport const PS_15 = '15';\nexport const PS_20 = '20';\nexport const PS_25 = '25';\nconst PAGE_SIZES = [{\n  value: PS_5,\n  label: '5'\n}, {\n  value: PS_10,\n  label: '10'\n}, {\n  value: PS_15,\n  label: '15'\n}, {\n  value: PS_20,\n  label: '20'\n}, {\n  value: PS_25,\n  label: '25'\n}];\nexport default PAGE_SIZES;","import React from 'react';\nimport PropTypes from '@dhis2/prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { SingleSelectField, SingleSelectOption } from '@dhis2/ui';\nimport CATEGORIES from '../../constants/categories';\nimport INTERVALS from '../../constants/intervals';\nimport AGGREGATIONS from '../../constants/aggregations';\nimport CHART_TYPES from '../../constants/chartTypes';\nimport EVENT_TYPES from '../../constants/eventTypes';\nimport PAGE_SIZES from '../../constants/pageSizes';\nimport SORT_ORDERS from '../../constants/sortOrders';\nexport const DropDown = ({\n  options,\n  value,\n  ...rest\n}) => <SingleSelectField {...rest} selected={value}>\n        {options.map(({\n    label,\n    value\n  }) => <SingleSelectOption label={label} key={value} value={value} />)}\n    </SingleSelectField>;\nDropDown.propTypes = {\n  options: PropTypes.array.isRequired,\n  value: PropTypes.string.isRequired\n};\nexport const Category = props => <DropDown {...props} label={i18n.t('Category')} options={CATEGORIES} />;\nexport const Interval = props => <DropDown {...props} label={i18n.t('Interval')} options={INTERVALS} />;\nexport const AggregationLevel = props => <DropDown {...props} label={i18n.t('Aggregation Level')} options={AGGREGATIONS} />;\nexport const ChartType = props => <DropDown {...props} label={i18n.t('Chart Type')} options={CHART_TYPES} />;\nexport const EventType = props => <DropDown {...props} label={i18n.t('Event Type')} options={EVENT_TYPES} />;\nexport const PageSize = props => <DropDown {...props} label={i18n.t('Page Size')} options={PAGE_SIZES} />;\nexport const SortOrder = props => <DropDown {...props} label={i18n.t('Sort Order')} options={SORT_ORDERS} />;","import React, { Component } from 'react';\nimport PropTypes from '@dhis2/prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { InputField } from '@dhis2/ui';\nimport debounce from 'lodash.debounce';\nimport './DateRange.css';\nexport const START_DATE = 'startDate';\nexport const END_DATE = 'endDate';\nexport const ERROR_PATTERN = i18n.t('Please use the format yyyy-mm-dd');\nexport const ERROR_MISSING_DATE = i18n.t('Please fill in both dates');\nexport const ERROR_END_BEFORE_START = i18n.t('End date is before start date');\nexport const ERROR_START_AFTER_END = i18n.t('Start date is after end date'); // Very basic date input. If browser doesn't support input type date,\n// it will use the pattern validation to display an error\n\nclass DateRange extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      startDateError: null,\n      endDateError: null\n    };\n    this.onStartDateChange = this.onStartDateChange.bind(this);\n    this.onEndDateChange = this.onEndDateChange.bind(this);\n    this.updateUsageData = debounce(props.updateUsageData, 250);\n  }\n\n  onStartDateChange({\n    value\n  }) {\n    this.onChange(START_DATE, value);\n  }\n\n  onEndDateChange({\n    value\n  }) {\n    this.onChange(END_DATE, value);\n  }\n\n  onChange(key, value) {\n    const {\n      updateFilter,\n      ...dateRange\n    } = this.props;\n    const errorKey = `${key}Error`;\n    const otherErrorKey = key === START_DATE ? `${END_DATE}Error` : `${START_DATE}Error`;\n    const error = this.getError({ ...dateRange,\n      [key]: value\n    }, key);\n    const otherError = this.state[otherErrorKey] === ERROR_PATTERN ? ERROR_PATTERN : null;\n\n    if (this.state[errorKey] !== error) {\n      this.setState({\n        [errorKey]: error,\n        [otherErrorKey]: otherError\n      });\n    }\n\n    updateFilter(key, value);\n\n    if (!error) {\n      this.updateUsageData();\n    }\n  }\n\n  getError(dateRange, key) {\n    if (!/[0-9]{4}-[0-9]{2}-[0-9]{2}/.test(dateRange[key])) {\n      return ERROR_PATTERN;\n    }\n\n    if (!dateRange.startDate || !dateRange.endDate) {\n      return ERROR_MISSING_DATE;\n    }\n\n    if (dateRange.endDate < dateRange.startDate) {\n      return key === START_DATE ? ERROR_START_AFTER_END : ERROR_END_BEFORE_START;\n    }\n\n    return null;\n  }\n\n  render() {\n    const {\n      startDate,\n      endDate\n    } = this.props;\n    const {\n      startDateError,\n      endDateError\n    } = this.state;\n    return <div className=\"uaa-date-range\">\n                <InputField label={i18n.t('Start Date')} type=\"date\" value={startDate} onChange={this.onStartDateChange} error={!!startDateError} validationText={startDateError} name={START_DATE} className={START_DATE} dataTest=\"uaa-startdate\" />\n                <InputField label={i18n.t('End Date')} type=\"date\" value={endDate} onChange={this.onEndDateChange} error={!!endDateError} validationText={endDateError} name={END_DATE} className={END_DATE} dataTest=\"uaa-enddate\" />\n            </div>;\n  }\n\n}\n\nDateRange.propTypes = {\n  updateFilter: PropTypes.func.isRequired,\n  updateUsageData: PropTypes.func.isRequired,\n  endDate: PropTypes.string,\n  startDate: PropTypes.string\n};\nexport default DateRange;","import { connect } from 'react-redux';\nimport * as DropDowns from './dropDownComponents';\nimport DateRangeComponent from './DateRange';\nimport { updateCategory, updateFilterAndGetData, updateFilter, updateUsageData } from '../../actions';\nexport const CategoryDropDown = connect(createValueGetterForFilterKey('category'), {\n  onChange: ({\n    selected\n  }) => updateCategory(selected)\n})(DropDowns.Category);\nexport const DateRange = connect(mapDateRangeProps, {\n  updateFilter,\n  updateUsageData\n})(DateRangeComponent);\nexport const IntervalDropDown = connect(createValueGetterForFilterKey('interval'), {\n  onChange: createFilterUpdater(updateFilterAndGetData, 'interval')\n})(DropDowns.Interval);\nexport const AggregationLevelDropDown = connect(createValueGetterForFilterKey('aggregationLevel'), {\n  onChange: createFilterUpdater(updateFilter, 'aggregationLevel')\n})(DropDowns.AggregationLevel);\nexport const ChartTypeDropDown = connect(createValueGetterForFilterKey('chartType'), {\n  onChange: createFilterUpdater(updateFilter, 'chartType')\n})(DropDowns.ChartType);\nexport const EventTypeDropDown = connect(createValueGetterForFilterKey('eventType'), {\n  onChange: createFilterUpdater(updateFilterAndGetData, 'eventType')\n})(DropDowns.EventType);\nexport const PageSizeDropDown = connect(createValueGetterForFilterKey('pageSize'), {\n  onChange: createFilterUpdater(updateFilterAndGetData, 'pageSize')\n})(DropDowns.PageSize);\nexport const SortOrderDropDown = connect(createValueGetterForFilterKey('sortOrder'), {\n  onChange: createFilterUpdater(updateFilterAndGetData, 'sortOrder')\n})(DropDowns.SortOrder);\nexport function createValueGetterForFilterKey(key) {\n  return function (state) {\n    return {\n      label: key,\n      value: state.filter[key]\n    };\n  };\n}\n\nfunction createFilterUpdater(updaterFn, filterKey) {\n  return function ({\n    selected\n  }) {\n    return updaterFn(filterKey, selected);\n  };\n}\n\nexport function mapDateRangeProps(state) {\n  return {\n    startDate: state.filter.startDate,\n    endDate: state.filter.endDate\n  };\n}","import React, { Fragment } from 'react';\nimport PropTypes from '@dhis2/prop-types';\nimport { connect } from 'react-redux';\nimport i18n from '@dhis2/d2-i18n';\nimport * as Fields from './FilterFields';\nimport { FAVORITE_VIEWS, TOP_FAVORITES } from '../constants/categories';\nimport './FilterSideBar.css';\nexport function FilterSideBar({\n  showDateFields,\n  showFavoriteViewsFields,\n  showTopFavoritesFields\n}) {\n  return <aside className=\"uaa-filter-sidebar\">\n            <h1 className=\"uaa-app-header\">{i18n.t('Usage Analytics')}</h1>\n            <Fields.CategoryDropDown />\n            {showDateFields && <Fragment>\n                    <Fields.DateRange />\n                    <Fields.IntervalDropDown />\n                </Fragment>}\n            {showFavoriteViewsFields && <Fragment>\n                    <Fields.AggregationLevelDropDown />\n                    <Fields.ChartTypeDropDown />\n                </Fragment>}\n            {showTopFavoritesFields && <Fragment>\n                    <Fields.EventTypeDropDown />\n                    <Fields.PageSizeDropDown />\n                    <Fields.SortOrderDropDown />\n                </Fragment>}\n        </aside>;\n}\nFilterSideBar.propTypes = {\n  showDateFields: PropTypes.bool,\n  showFavoriteViewsFields: PropTypes.bool,\n  showTopFavoritesFields: PropTypes.bool\n};\nexport function mapStateToProps({\n  filter: {\n    category\n  }\n}) {\n  return {\n    showDateFields: category !== TOP_FAVORITES,\n    showTopFavoritesFields: category === TOP_FAVORITES,\n    showFavoriteViewsFields: category === FAVORITE_VIEWS\n  };\n}\nexport default connect(mapStateToProps)(FilterSideBar);","import i18n from '@dhis2/d2-i18n';\nexport const date = {\n  key: 'date',\n  label: i18n.t('Date')\n};\nexport const mapViews = {\n  key: 'mapViews',\n  label: i18n.t('Map')\n};\nexport const chartViews = {\n  key: 'chartViews',\n  label: i18n.t('Chart')\n};\nexport const pivotTableViews = {\n  key: 'pivotTableViews',\n  label: i18n.t('Pivot Table')\n};\nexport const eventReportViews = {\n  key: 'eventReportViews',\n  label: i18n.t('Event Report')\n};\nexport const eventChartViews = {\n  key: 'eventChartViews',\n  label: i18n.t('Event Chart')\n};\nexport const dashboardViews = {\n  key: 'dashboardViews',\n  label: i18n.t('Dashboard')\n};\nexport const dataSetReportViews = {\n  key: 'dataSetReportViews',\n  label: i18n.t('Data Set Report')\n};\nexport const totalViews = {\n  key: 'totalViews',\n  label: i18n.t('Total')\n};\nexport const averageMapViews = {\n  key: 'averageMapViews',\n  label: i18n.t('Average Map')\n};\nexport const averageChartViews = {\n  key: 'averageChartViews',\n  label: i18n.t('Average Chart')\n};\nexport const averagePivotTableViews = {\n  key: 'averagePivotTableViews',\n  label: i18n.t('Average Pivot Table')\n};\nexport const averageEventReportViews = {\n  key: 'averageEventReportViews',\n  label: i18n.t('Average Event Report')\n};\nexport const averageEventChartViews = {\n  key: 'averageEventChartViews',\n  label: i18n.t('Average Event Chart')\n};\nexport const averageDashboardViews = {\n  key: 'averageDashboardViews',\n  label: i18n.t('Average Dashboard')\n};\nexport const averageViews = {\n  key: 'averageViews',\n  label: i18n.t('Average')\n};\nexport const savedMaps = {\n  key: 'savedMaps',\n  label: i18n.t('Maps')\n};\nexport const savedCharts = {\n  key: 'savedCharts',\n  label: i18n.t('Charts')\n};\nexport const savedPivotTables = {\n  key: 'savedPivotTables',\n  label: i18n.t('Pivot Tables')\n};\nexport const savedEventReports = {\n  key: 'savedEventReports',\n  label: i18n.t('Event Reports')\n};\nexport const savedEventCharts = {\n  key: 'savedEventCharts',\n  label: i18n.t('Event Charts')\n};\nexport const savedDashboards = {\n  key: 'savedDashboards',\n  label: i18n.t('Dashboards')\n};\nexport const savedIndicators = {\n  key: 'savedIndicators',\n  label: i18n.t('Indicators')\n};\nexport const activeUsers = {\n  key: 'activeUsers',\n  label: i18n.t('Active Users')\n};\nexport const users = {\n  key: 'users',\n  label: i18n.t('Total Users')\n};\nexport const position = {\n  key: 'position',\n  label: i18n.t('Position')\n};\nexport const name = {\n  key: 'name',\n  label: i18n.t('Name')\n};\nexport const views = {\n  key: 'views',\n  label: i18n.t('Views')\n};\nexport const id = {\n  key: 'id',\n  label: i18n.t('ID')\n};\nexport const created = {\n  key: 'created',\n  label: i18n.t('Created')\n};\nexport const savedDataValues = {\n  key: 'savedDataValues',\n  label: i18n.t('Data Values')\n};","import * as CATS from './categories';\nimport * as AGGREG from './aggregations';\nimport * as CHARTS from './chartTypes';\nimport * as PROPS from './properties';\nconst FAVORITE_VIEWS_SUM_FIELDS = [PROPS.mapViews, PROPS.chartViews, PROPS.pivotTableViews, PROPS.eventReportViews, PROPS.eventChartViews, PROPS.dashboardViews, PROPS.dataSetReportViews];\nconst FAVORITE_VIEWS_AVG_FIELDS = [PROPS.averageMapViews, PROPS.averageChartViews, PROPS.averagePivotTableViews, PROPS.averageEventReportViews, PROPS.averageEventChartViews, PROPS.averageDashboardViews];\nconst FAVORITES_SAVED_FIELDS = [PROPS.savedMaps, PROPS.savedCharts, PROPS.savedPivotTables, PROPS.savedEventReports, PROPS.savedEventCharts, PROPS.savedDashboards, PROPS.savedIndicators];\nconst USERS_FIELDS = [PROPS.activeUsers, PROPS.users];\nexport const TABLE_FIELDS = {\n  [CATS.FAVORITE_VIEWS]: {\n    [AGGREG.SUM]: [PROPS.date, ...FAVORITE_VIEWS_SUM_FIELDS, PROPS.totalViews],\n    [AGGREG.AVERAGE]: [PROPS.date, ...FAVORITE_VIEWS_AVG_FIELDS, PROPS.averageViews]\n  },\n  [CATS.FAVORITES_SAVED]: [PROPS.date, ...FAVORITES_SAVED_FIELDS],\n  [CATS.USERS]: [PROPS.date, ...USERS_FIELDS],\n  [CATS.TOP_FAVORITES]: [PROPS.position, PROPS.name, PROPS.views, PROPS.id, PROPS.created],\n  [CATS.DATA_VALUES]: [PROPS.date, PROPS.savedDataValues]\n};\nexport const CHART_FIELDS = {\n  [CATS.FAVORITE_VIEWS]: {\n    [AGGREG.SUM]: {\n      [CHARTS.ALL]: FAVORITE_VIEWS_SUM_FIELDS,\n      [CHARTS.TOTAL]: [PROPS.totalViews]\n    },\n    [AGGREG.AVERAGE]: {\n      [CHARTS.ALL]: FAVORITE_VIEWS_AVG_FIELDS,\n      [CHARTS.TOTAL]: [PROPS.averageViews]\n    }\n  },\n  [CATS.FAVORITES_SAVED]: FAVORITES_SAVED_FIELDS,\n  [CATS.USERS]: USERS_FIELDS,\n  [CATS.DATA_VALUES]: [PROPS.savedDataValues]\n};","import store from '../store';\nimport { YEAR, MONTH, WEEK, DAY } from '../constants/intervals';\nimport i18n from '@dhis2/d2-i18n';\nconst dateFormats = {\n  yyyymmdd: {\n    day: 'numeric',\n    month: 'short',\n    year: 'numeric'\n  },\n  yyyymm: {\n    month: 'short',\n    year: 'numeric'\n  }\n};\nconst weekStr = i18n.t('Week');\nexport function getDisplayDateForInterval({\n  year,\n  month,\n  week,\n  day\n}, interval) {\n  switch (interval) {\n    case YEAR:\n      return year;\n\n    case MONTH:\n      return getDisplayDateFromYearMonthDay(year, month);\n\n    case WEEK:\n      return `${weekStr} ${week} / ${year}`;\n\n    case DAY:\n    default:\n      return getDisplayDateFromYearMonthDay(year, month, day);\n  }\n}\nexport function getDisplayDateFromIsoString(isoString) {\n  const date = new Date(isoString);\n  return getDisplayDate(date, dateFormats.yyyymmdd);\n}\nexport function getDisplayDateFromYearMonthDay(year, month, day) {\n  const date = day ? new Date(year, month - 1, day) : new Date(year, month - 1);\n  const format = day ? dateFormats.yyyymmdd : dateFormats.yyyymm;\n  return getDisplayDate(date, format);\n}\n\nfunction getDisplayDate(date, dateFormatOptions) {\n  const state = store.getState();\n  const locale = state.locale || 'en';\n  return new Intl.DateTimeFormat(locale, dateFormatOptions).format(date);\n}","import i18n from '@dhis2/d2-i18n';\nexport const colors = ['#7cb5ec', '#CC6600', '#CCCC00', '#66CC00', '#ff0066', '#000000', '#00CCCC'];\nexport const options = {\n  animation: {\n    duration: 180\n  },\n  legend: {\n    position: 'bottom'\n  },\n  responsive: true,\n  maintainAspectRatio: false,\n  tooltips: {\n    mode: 'nearest'\n  },\n  scales: {\n    xAxes: [{\n      display: true,\n      scaleLabel: {\n        display: true\n      },\n      ticks: {\n        maxRotation: 45,\n        minRotation: 45\n      }\n    }],\n    yAxes: [{\n      display: true,\n      scaleLabel: {\n        display: true,\n        labelString: i18n.t('Values')\n      },\n      ticks: {\n        suggestedMin: 0,\n        precision: 0\n      }\n    }]\n  }\n};\nexport const dataSet = {\n  backgroundColor: 'rgba(0, 0, 0, 0)',\n  fill: false,\n  lineTension: 0\n};","import { CHART_FIELDS as FIELDS } from '../../constants/fields';\nimport CATEGORIES, { FAVORITE_VIEWS } from '../../constants/categories';\nimport { getDisplayDateForInterval } from '../../utils/date';\nimport * as config from './config'; // This will ensure that the chart at has an yAxis from 0 - 1\n\nconst MIN_SUGGESTED_MAX_VALUE = 1;\nexport default function parseChartData({\n  aggregationLevel,\n  category,\n  chartType,\n  interval\n}, dataPoints) {\n  const labels = [];\n  const datasets = [];\n  const {\n    label,\n    subtitle\n  } = CATEGORIES.find(c => c.value === category);\n  let max = MIN_SUGGESTED_MAX_VALUE;\n  let min = null;\n  const fields = category === FAVORITE_VIEWS ? FIELDS[category][aggregationLevel][chartType] : FIELDS[category];\n  const dataPointsLen = dataPoints.length;\n  const fieldsLen = fields.length;\n\n  for (let dataPointIndex = 0; dataPointIndex < dataPointsLen; dataPointIndex++) {\n    const dataPoint = dataPoints[dataPointIndex];\n    labels.push(getDisplayDateForInterval(dataPoint, interval));\n\n    for (let fieldIndex = 0; fieldIndex < fieldsLen; fieldIndex++) {\n      const field = fields[fieldIndex];\n\n      if (dataPointIndex === 0) {\n        datasets.push({ ...config.dataSet,\n          label: field.label,\n          data: [],\n          borderColor: config.colors[fieldIndex]\n        });\n      }\n\n      const pointValue = dataPoint[field.key];\n\n      if (pointValue > max) {\n        max = pointValue;\n      }\n\n      if (min === null || pointValue < min) {\n        min = pointValue;\n      }\n\n      datasets[fieldIndex].data.push(pointValue);\n    }\n  }\n\n  config.options.scales.yAxes[0].ticks.suggestedMax = max;\n  config.options.scales.yAxes[0].ticks.suggestedMin = min;\n  config.options.onResize = onChartResize;\n  return {\n    data: {\n      labels,\n      datasets\n    },\n    options: config.options,\n    title: label,\n    subtitle\n  };\n}\nexport function onChartResize(chart) {\n  chart.resize();\n}","import React, { Fragment } from 'react';\nimport PropTypes from '@dhis2/prop-types';\nimport { connect } from 'react-redux';\nimport { CircularLoader } from '@dhis2/ui';\nimport { Line } from 'react-chartjs-2';\nimport parseChartData from './parseChartData';\nimport { LOADING, ERROR } from '../../constants/statuses';\nimport { TOP_FAVORITES } from '../../constants/categories';\nimport './Chart.css';\nconst baseClassName = 'uua-data-container uua-chart-container';\nconst loadingClassName = ' uua-data-container--loading';\nexport function Chart({\n  shouldHide,\n  loading,\n  chartConfig\n}) {\n  let content;\n\n  if (shouldHide) {\n    return null;\n  } else if (loading) {\n    content = <CircularLoader overlay />;\n  } else {\n    const {\n      options,\n      data,\n      title,\n      subtitle\n    } = chartConfig;\n    content = <Fragment>\n                <h4 className=\"uaa-chart-title\">{title}</h4>\n                <h6 className=\"uaa-chart-subtitle\">{subtitle}</h6>\n                {\n        /*\n           chart.js canvas needs a dedicated wrapper to have a responsive size\n           https://www.chartjs.org/docs/latest/general/responsive.html#important-note\n        */\n      }\n                <div className=\"uaa-chart-wrap\">\n                    <Line data={data} options={options} />\n                </div>\n            </Fragment>;\n  }\n\n  const className = loading ? baseClassName + loadingClassName : baseClassName;\n  return <div className={className}>{content}</div>;\n}\nChart.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  shouldHide: PropTypes.bool.isRequired,\n  chartConfig: PropTypes.object\n}; // The Chart is not displayed for category TOP_FAVORITES, but it should also\n// be hidden when usageData === ERROR, because one Error message is enough,\n// and this Error will be displayed in the Table component\n\nexport function mapStateToProps({\n  usageData,\n  filter\n}) {\n  const shouldHide = filter.category === TOP_FAVORITES || usageData === ERROR;\n  const loading = usageData === LOADING;\n  return {\n    shouldHide,\n    loading,\n    chartConfig: shouldHide || loading ? null : parseChartData(filter, usageData)\n  };\n}\nexport default connect(mapStateToProps)(Chart);","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from '@dhis2/prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { CircularLoader } from '@dhis2/ui';\nimport { FAVORITE_VIEWS } from '../constants/categories';\nimport { TABLE_FIELDS as FIELDS } from '../constants/fields';\nimport { date as dateField, created as createdField } from '../constants/properties';\nimport { ERROR, LOADING } from '../constants/statuses';\nimport Error from './Error';\nimport { getDisplayDateForInterval, getDisplayDateFromIsoString } from '../utils/date';\nimport './Table.css';\nconst baseClassName = 'uua-data-container';\nconst loadingClassName = ' uua-data-container--loading';\nexport const TableHead = ({\n  headers\n}) => <thead>\n        <tr>\n            {headers.map((header, i) => <th key={`h-${i}`}>{header}</th>)}\n        </tr>\n    </thead>;\nexport const TableBody = ({\n  rows\n}) => <tbody>\n        {rows.map((row, i) => <TableRow key={`row-${i}`} cells={row} />)}\n    </tbody>;\nexport const TableRow = ({\n  cells\n}) => <tr>\n        {cells.map((text, i) => <td key={`cell-${i}`}>{text}</td>)}\n    </tr>;\nexport function Table({\n  error,\n  loading,\n  tableData\n}) {\n  let content;\n\n  if (error) {\n    content = <Error message={i18n.t('There was an error retrieving the usage analytics data')} />;\n  } else if (loading) {\n    content = <CircularLoader overlay />;\n  } else {\n    const {\n      headers,\n      rows\n    } = tableData;\n    content = <table className=\"uaa-data-table\">\n                <TableHead headers={headers} />\n                <TableBody rows={rows} />\n            </table>;\n  }\n\n  const className = loading ? baseClassName + loadingClassName : baseClassName;\n  return <div className={className}>{content}</div>;\n}\nTable.propTypes = {\n  error: PropTypes.bool.isRequired,\n  loading: PropTypes.bool.isRequired,\n  tableData: PropTypes.object\n};\nTableHead.propTypes = {\n  headers: PropTypes.arrayOf(PropTypes.string).isRequired\n};\nTableBody.propTypes = {\n  rows: PropTypes.arrayOf(PropTypes.array).isRequired\n};\nTableRow.propTypes = {\n  cells: PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.string, PropTypes.number])).isRequired\n};\nexport function mapStateToProps({\n  usageData,\n  filter\n}) {\n  const error = usageData === ERROR;\n  const loading = usageData === LOADING;\n  return {\n    error,\n    loading,\n    tableData: loading || error ? null : parseTableData(filter, usageData)\n  };\n}\n\nfunction parseTableData({\n  aggregationLevel,\n  category,\n  interval\n}, dataPoints) {\n  const fields = category === FAVORITE_VIEWS ? FIELDS[category][aggregationLevel] : FIELDS[category];\n  return {\n    headers: fields.map(({\n      label\n    }) => label),\n    rows: dataPoints.map(dataPoint => fields.map(field => {\n      if (field.key === dateField.key) {\n        return getDisplayDateForInterval(dataPoint, interval);\n      }\n\n      if (field.key === createdField.key) {\n        return getDisplayDateFromIsoString(dataPoint[field.key]);\n      }\n\n      return dataPoint[field.key];\n    }))\n  };\n}\n\nexport default connect(mapStateToProps)(Table);","import React, { Component } from 'react';\nimport PropTypes from '@dhis2/prop-types';\nimport { connect } from 'react-redux';\nimport i18n from '@dhis2/d2-i18n';\nimport { Layer, CenteredContent, CircularLoader } from '@dhis2/ui';\nimport { LOADING, ERROR } from '../constants/statuses';\nimport { initApp } from '../actions';\nimport Error from './Error';\nimport FilterSideBar from './FilterSideBar';\nimport Chart from './Chart';\nimport Table from './Table';\nexport class UsageAnalytics extends Component {\n  componentDidMount() {\n    this.props.initApp();\n  }\n\n  render() {\n    const {\n      appStatus\n    } = this.props;\n\n    if (appStatus === LOADING) {\n      return <Layer translucent>\n                    <CenteredContent>\n                        <CircularLoader large />\n                    </CenteredContent>\n                </Layer>;\n    }\n\n    if (appStatus === ERROR) {\n      return <Error message={i18n.t('Error loading application.')} />;\n    }\n\n    return <main className=\"uaa-container\">\n                <FilterSideBar />\n                <section className=\"uaa-content\">\n                    <Chart />\n                    <Table />\n                </section>\n            </main>;\n  }\n\n}\nUsageAnalytics.propTypes = {\n  appStatus: PropTypes.string,\n  initApp: PropTypes.func\n};\n\nconst mapStateToProps = ({\n  appStatus\n}) => ({\n  appStatus\n});\n\nexport default connect(mapStateToProps, {\n  initApp\n})(UsageAnalytics);","import React from 'react';\nimport { Provider } from 'react-redux';\nimport { useConfig } from '@dhis2/app-runtime';\nimport store from '../store';\nimport api from '../api';\nimport UsageAnalytics from './UsageAnalytics';\nimport '../index.css';\n\nfunction App() {\n  const {\n    baseUrl\n  } = useConfig();\n  api.setBaseUrl(baseUrl);\n  return <Provider store={store}>\n            <UsageAnalytics />\n        </Provider>;\n}\n\nexport default App;"],"sourceRoot":""}