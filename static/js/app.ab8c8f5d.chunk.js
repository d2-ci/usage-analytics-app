(this["webpackJsonp@dhis2/app-shell"]=this["webpackJsonp@dhis2/app-shell"]||[]).push([[127],{176:function(e,t,a){e.exports={container:"LayoutContainer_container__2gt-1"}},177:function(e,t,a){e.exports={sidebar:"LayoutSidebar_sidebar__38x-X"}},178:function(e,t,a){e.exports={content:"LayoutContent_content__3pEdj"}},179:function(e,t,a){e.exports={title:"AppTitle_title__mjsfQ"}},180:function(e,t,a){},181:function(e,t,a){"use strict";a.r(t);var r=a(7),n=a(1),l=a.n(n),c=a(6),s=a.n(c),u=[{value:"FAVORITE_VIEWS",label:s.a.t("Favorite views"),subtitle:s.a.t("Number of times users looked at analysis favorites")},{value:"FAVORITES_SAVED",label:s.a.t("Favorites saved"),subtitle:s.a.t("Number of analysis favorites created by users")},{value:"USERS",label:s.a.t("Users"),subtitle:s.a.t("Number of users in the system")},{value:"TOP_FAVORITES",label:s.a.t("Top favorites")},{value:"DATA_VALUES",label:s.a.t("Data values"),subtitle:s.a.t("Number of data values saved in the system")}],i=[{value:"DAY",label:s.a.t("Day")},{value:"WEEK",label:s.a.t("Week")},{value:"MONTH",label:s.a.t("Month")},{value:"YEAR",label:s.a.t("Year")}],o=[{value:"SUM",label:s.a.t("Sum")},{value:"AVERAGE",label:s.a.t("Average")}],v=[{value:"ALL",label:s.a.t("All")},{value:"TOTAL",label:s.a.t("Total")}],E=[{value:"CHART_VIEW",label:s.a.t("Chart")},{value:"MAP_VIEW",label:s.a.t("Map")},{value:"REPORT_TABLE_VIEW",label:s.a.t("Report table")},{value:"EVENT_REPORT_VIEW",label:s.a.t("Event report")},{value:"EVENT_CHART_VIEW",label:s.a.t("Event chart")},{value:"DASHBOARD_VIEW",label:s.a.t("Dashboard")},{value:"DATA_SET_REPORT_VIEW",label:s.a.t("Data set report")}],m=[{value:"5",label:"5"},{value:"10",label:"10"},{value:"15",label:"15"},{value:"20",label:"20"},{value:"25",label:"25"}],d=[{value:"ASC",label:s.a.t("Ascending")},{value:"DESC",label:s.a.t("Descending")}],b=a(14),f=function(e){var t=e.startDate,a=e.setStartDate,r=e.endDate,n=e.setEndDate;return l.a.createElement("div",{className:"uaa-date-range"},l.a.createElement(b.f,{label:s.a.t("Start Date"),type:"date",value:t,onChange:function(e){var t=e.value;return a(t)}}),l.a.createElement(b.f,{label:s.a.t("End Date"),type:"date",value:r,onChange:function(e){var t=e.value;return n(t)}}))},g=function(e){var t=e.interval,a=e.setInterval;return l.a.createElement(b.l,{selected:t,onChange:function(e){var t=e.selected;a(t)},label:s.a.t("Interval")},i.map((function(e){var t=e.label,a=e.value;return l.a.createElement(b.m,{label:t,key:a,value:a})})))},p=function(e){var t=e.aggregation,a=e.setAggregation;return l.a.createElement(b.l,{selected:t,onChange:function(e){var t=e.selected;a(t)},label:s.a.t("Aggregation level")},o.map((function(e){var t=e.label,a=e.value;return l.a.createElement(b.m,{label:t,key:a,value:a})})))},y=function(e){var t=e.chartType,a=e.setChartType;return l.a.createElement(b.l,{selected:t,onChange:function(e){var t=e.selected;a(t)},label:s.a.t("Chart type")},v.map((function(e){var t=e.label,a=e.value;return l.a.createElement(b.m,{label:t,key:a,value:a})})))},S=function(e){var t=e.eventType,a=e.setEventType;return l.a.createElement(b.l,{selected:t,onChange:function(e){var t=e.selected;a(t)},label:s.a.t("Event type")},E.map((function(e){var t=e.label,a=e.value;return l.a.createElement(b.m,{label:t,key:a,value:a})})))},D=function(e){var t=e.pageSize,a=e.setPageSize;return l.a.createElement(b.l,{selected:t,onChange:function(e){var t=e.selected;a(t)},label:s.a.t("Page size")},m.map((function(e){var t=e.label,a=e.value;return l.a.createElement(b.m,{label:t,key:a,value:a})})))},O=function(e){var t=e.sortOrder,a=e.setSortOrder;return l.a.createElement(b.l,{selected:t,onChange:function(e){var t=e.selected;a(t)},label:s.a.t("Sort order")},d.map((function(e){var t=e.label,a=e.value;return l.a.createElement(b.m,{label:t,key:a,value:a})})))},T=function(e){var t=e.category,a=e.startDate,r=e.setStartDate,n=e.endDate,c=e.setEndDate,s=e.interval,u=e.setInterval,i=e.aggregation,o=e.setAggregation,v=e.chartType,E=e.setChartType,m=e.eventType,d=e.setEventType,b=e.pageSize,T=e.setPageSize,h=e.sortOrder,A=e.setSortOrder,_="TOP_FAVORITES"===t,Y="FAVORITE_VIEWS"===t;return l.a.createElement(l.a.Fragment,null,!_&&l.a.createElement(l.a.Fragment,null,l.a.createElement(f,{startDate:a,setStartDate:r,endDate:n,setEndDate:c}),l.a.createElement(g,{interval:s,setInterval:u})),Y&&l.a.createElement(l.a.Fragment,null,l.a.createElement(p,{aggregation:i,setAggregation:o}),l.a.createElement(y,{chartType:v,setChartType:E})),_&&l.a.createElement(l.a.Fragment,null,l.a.createElement(S,{eventType:m,setEventType:d}),l.a.createElement(D,{pageSize:b,setPageSize:T}),l.a.createElement(O,{sortOrder:h,setSortOrder:A})))},h=a(176),A=a.n(h),_=function(e){var t=e.children;return l.a.createElement("main",{className:A.a.container},t)},Y=a(177),C=a.n(Y),j=function(e){var t=e.children;return l.a.createElement("aside",{className:C.a.sidebar},t)},V=a(178),I=a.n(V),R=function(e){var t=e.children;return l.a.createElement("section",{className:I.a.content},t)},z=function(e){var t=e.category,a=e.setCategory;return l.a.createElement(b.l,{selected:t,onChange:function(e){var t=e.selected;a(t)},label:s.a.t("Category")},u.map((function(e){var t=e.label,a=e.value;return l.a.createElement(b.m,{label:t,key:a,value:a})})))},M=a(179),k=a.n(M),W=function(){return l.a.createElement("h1",{className:k.a.title},s.a.t("Usage Analytics"))},F=a(21),N=a.n(F),L=function(e){var t=e.data,a=e.interval;return l.a.createElement(b.n,null,l.a.createElement(b.r,null,l.a.createElement(b.t,null,l.a.createElement(b.q,null,s.a.t("Date")),l.a.createElement(b.q,null,s.a.t("Data Values")))),l.a.createElement(b.o,null,t.map((function(e){var t=e.year,r=e.month,n=e.week,c=e.day,u=e.savedDataValues,i=function(e,t){var a=e.year,r=e.month,n=e.week,l=e.day;switch(t){case"YEAR":return N()({year:a}).format("YYYY");case"MONTH":var c=r-1;return N()({year:a,month:c}).format("MMM YYYY");case"WEEK":var u="[".concat(s.a.t("Week"),"] [").concat(n,"] / YYYY");return N()({year:a}).format(u);case"DAY":var i=r-1;return N()({year:a,month:i,day:l}).format("MMM D, YYYY")}}({year:t,month:r,week:n,day:c},a);return l.a.createElement(b.s,{key:i},l.a.createElement(b.p,null,i),l.a.createElement(b.p,null,u))}))))},P=a(16),w={favorites:{resource:"dataStatistics/favorites",params:function(e){return{eventType:e.eventType,pageSize:e.pageSize,sortOrder:e.sortOrder}}}},U=function(e){var t=e.eventType,a=e.pageSize,r=e.sortOrder,c=e.children,s=Object(P.c)(w,{lazy:!0,variables:{eventType:t,pageSize:a,sortOrder:r}}),u=s.loading,i=s.error,o=s.data,v=s.called,E=s.refetch;return Object(n.useEffect)((function(){E({eventType:t,pageSize:a,sortOrder:r})}),[t,a,r]),!v||u?l.a.createElement("div",null,"Loading"):i?l.a.createElement("div",null,i.message||"Error"):c(o.favorites)},H={dataStatistics:{resource:"dataStatistics",params:function(e){return{startDate:e.startDate,endDate:e.endDate,interval:e.interval}}}},x=function(e){var t=e.startDate,a=e.endDate,r=e.interval,c=e.stale,s=e.setStale,u=e.children,i=function(){return s(!1)},o=Object(P.c)(H,{lazy:!0,variables:{startDate:t,endDate:a,interval:r},onComplete:i,onError:i}),v=o.loading,E=o.error,m=o.data,d=o.called,b=o.refetch;return Object(n.useEffect)((function(){b({startDate:t,endDate:a,interval:r})}),[t,a,r]),!d||v||c?l.a.createElement("div",null,"Loading"):E?l.a.createElement("div",null,E.message||"Error"):u(m.dataStatistics)},J=function(e){var t=e.isTopFavorites,a=e.category,r=e.eventType,n=e.pageSize,c=e.sortOrder,s=e.startDate,u=e.endDate,i=e.interval,o=e.stale,v=e.setStale;return t?l.a.createElement(U,{eventType:r,pageSize:n,sortOrder:c},(function(e){return l.a.createElement("pre",null,JSON.stringify(e,null,2))})):l.a.createElement(x,{startDate:s,endDate:u,interval:i,setStale:v,stale:o},(function(e){return"DATA_VALUES"===a?l.a.createElement(L,{data:e,interval:i}):null}))},K=(a(180),function(){return{initialStartDate:N()().subtract(4,"months").format("YYYY-MM-DD"),initialEndDate:N()().format("YYYY-MM-DD")}}),q=function(){var e=K(),t=e.initialStartDate,a=e.initialEndDate,c=Object(n.useState)("FAVORITE_VIEWS"),s=Object(r.a)(c,2),u=s[0],i=s[1],o=Object(n.useState)(t),v=Object(r.a)(o,2),E=v[0],m=v[1],d=Object(n.useState)(a),b=Object(r.a)(d,2),f=b[0],g=b[1],p=Object(n.useState)("WEEK"),y=Object(r.a)(p,2),S=y[0],D=y[1],O=Object(n.useState)("SUM"),h=Object(r.a)(O,2),A=h[0],Y=h[1],C=Object(n.useState)("ALL"),V=Object(r.a)(C,2),I=V[0],M=V[1],k=Object(n.useState)("CHART_VIEW"),F=Object(r.a)(k,2),N=F[0],L=F[1],P=Object(n.useState)("25"),w=Object(r.a)(P,2),U=w[0],H=w[1],x=Object(n.useState)("ASC"),q=Object(r.a)(x,2),B=q[0],G=q[1],Q=Object(n.useState)(!1),X=Object(r.a)(Q,2),Z=X[0],$=X[1],ee="TOP_FAVORITES"===u;return l.a.createElement(_,null,l.a.createElement(j,null,l.a.createElement(W,null),l.a.createElement(z,{category:u,setCategory:i}),l.a.createElement(T,{category:u,startDate:E,setStartDate:m,endDate:f,setEndDate:g,interval:S,setInterval:function(e){$(!0),D(e)},aggregation:A,setAggregation:Y,chartType:I,setChartType:M,eventType:N,setEventType:L,pageSize:U,setPageSize:H,sortOrder:B,setSortOrder:G})),l.a.createElement(R,null,l.a.createElement(J,{isTopFavorites:ee,category:u,eventType:N,pageSize:U,sortOrder:B,startDate:E,endDate:f,interval:S,stale:Z,setStale:$})))};a.d(t,"default",(function(){return q}))}}]);
//# sourceMappingURL=app.ab8c8f5d.chunk.js.map